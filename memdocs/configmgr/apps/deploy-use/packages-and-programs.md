---
title: パッケージとプログラム
titleSuffix: Configuration Manager
description: Configuration Manager でレガシ パッケージとプログラムを使用する展開をサポートします。
ms.date: 07/26/2019
ms.prod: configuration-manager
ms.technology: configmgr-app
ms.topic: conceptual
ms.assetid: caad0507-9913-415a-b13d-d36f8f0a1b80
author: aczechowski
manager: dougeby
ms.author: aaroncz
ms.openlocfilehash: 2c125212a13790e196d001f53411633d1e42d4f8
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/21/2020
ms.locfileid: "81689290"
---
# <a name="packages-and-programs-in-configuration-manager"></a>Configuration Manager のパッケージとプログラム

*適用対象:Configuration Manager (Current Branch)*

Configuration Manager は、Configuration Manager 2007 で使用されていたパッケージとプログラムを引き続きサポートします。 次のいずれかのツールまたはスクリプトを展開する場合、パッケージおよびプログラムを使用する展開は、アプリケーションよりも適切な場合があります。  

- コンピューターにアプリケーションをインストールしない管理ツール
- 継続的に監視する必要がない "1 回限り" のスクリプト  
- 定期的なスケジュールに従って実行され、グローバルの評価版を使用できないスクリプト

> [!TIP]  
> Configuration Manager コンソールの[スクリプト](create-deploy-scripts.md)機能を使用することを検討してください。 先述のいくつかのシナリオでは、パッケージやプログラムを使用する代わりに、スクリプトの方がソリューションとして優れている可能性があります。

以前のバージョンの Configuration Manager からパッケージを移行する場合、Configuration Manager 階層に展開できます。 移行が完了したら、パッケージは、 **[ソフトウェア ライブラリ]** ワークスペースの **[パッケージ]** ノードに表示されます。

これらのパッケージは、ソフトウェア配布を使用する場合と同じように変更および展開できます。 **定義に基づくパッケージの作成ウィザード**は、レガシ パッケージをインポートするために Configuration Manager に残っています。 公開通知は、Configuration Manager 2007 から Configuration Manager 階層に移行するときに、展開のために変換されます。  

> [!NOTE]  
> Package Conversion Manager を使用して、パッケージとプログラムを Configuration Manager アプリケーションに変換します。  
>
> バージョン 1806 以降では、Package Conversion Manager は Configuration Manager と統合されています。 詳細については、[Package Conversion Manager](../pcm/package-conversion-manager.md) に関するページを参照してください。  

パッケージでは、配布ポイント グループや監視など、Configuration Manager の新機能をいくつか使用できます。 Configuration Manager のパッケージとプログラムを使用して、Microsoft Application Virtualization (App-V) アプリケーションを展開することはできません。 仮想アプリケーションを配布するには、これを Configuration Manager アプリケーションとして作成します。 詳細については、「[App-V 仮想アプリケーションの展開](../get-started/deploying-app-v-virtual-applications.md)」をご覧ください。  


## <a name="create-a-package-and-program"></a>パッケージとプログラムを作成する

### <a name="use-the-create-package-and-program-wizard"></a>パッケージとプログラムの作成ウィザードを使用する

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[アプリケーション管理]** を展開して **[パッケージ]** ノードを選択します。  

2. リボンの **[ホーム]** タブの **[作成]** グループで、 **[パッケージの作成]** を選択します。  

3. **パッケージとプログラムの作成ウィザード** の **[パッケージ]** ページで、次の情報を指定します。  

    - **名前**:最大 50 文字でパッケージの名前を指定します。  

    - **説明**:最大 128 文字でパッケージの説明を指定します。  

    - **製造元** (省略可能):Configuration Manager コンソールでパッケージを識別しやすいように、製造元の名前を指定します。 この名前は 32 文字以下にします。

    - **言語** (省略可能):最大 32 文字でパッケージの言語バージョンを指定します。  

    - **バージョン** (省略可能):最大 32 文字でパッケージのバージョン番号を指定します。

    - **このパッケージにソース ファイルを含める**:クライアント デバイスにソース ファイルが必要かどうかを示します。 既定では、ウィザードはこのオプションを有効にせず、Configuration Manager はパッケージの配布ポイントを使用しません。 このオプションを選択する場合は、配布ポイントに配布するパッケージ コンテンツを指定します。  

    - **ソース フォルダー**:パッケージにソース ファイルが含まれる場合は、 **[参照]** を選択して **[ソース フォルダーの設定]** ダイアログ ボックスを開き、パッケージのソース ファイルの場所を指定します。  

        > [!NOTE]  
        > サイト サーバーのコンピューター アカウントには、指定するソース フォルダーへの読み取りアクセス許可が必要です。  

    - バージョン 1906 以降では、クライアントでコンテンツを事前キャッシュする場合は、パッケージの**アーキテクチャ**と**言語**を指定します。 詳細については、「[コンテンツの事前キャッシュを構成する](../../osd/deploy-use/configure-precache-content.md)」を参照してください。<!--4224642-->  

4. **パッケージとプログラムの作成ウィザード**の **[プログラムの種類]** ページで、作成するプログラムの種類を選択し、 **[次へ]** を選択します。 [コンピューター](#create-a-standard-program)や[デバイス](#create-a-device-program)用にプログラムを作成することも、この手順をスキップして後からプログラムを作成することもできます。  

    > [!TIP]  
    > 既存のパッケージに新しいプログラムを作成するには、最初にパッケージを選択します。 **[ホーム]** タブの **[パッケージ]** グループで、 **[プログラムの作成]** を選択し、**プログラムの作成ウィザード**を開きます。  

#### <a name="create-a-standard-program"></a>標準プログラムを作成する

1. **パッケージとプログラムの作成ウィザード**の **[プログラムの種類]** ページで、 **[標準プログラム]** を選択してから、 **[次へ]** を選択します。  

2. **[標準プログラム]** ページで、次の情報を指定します。  

    - **名前:** 最大 50 文字でプログラムの名前を指定します。  

        > [!NOTE]  
        > プログラム名はパッケージ内で一意である必要があります。 プログラムを作成した後でその名前を変更することはできません。  

    - **コマンド ライン**:このプログラムの起動に使用するコマンド ラインを入力するか、 **[参照]** を選択してファイルの場所を参照します。  

        ファイル名に拡張子を指定していない場合、Configuration Manager は .com、.exe、.bat 拡張子の使用を試みます。  

        クライアントがプログラムを実行すると、Configuration Manager は次の場所でファイルを検索します。

        - パッケージ内
        - ローカルの Windows フォルダー
        - ローカル *%path%*

        ファイルが見つからない場合、プログラムは失敗します。  

    - **スタートアップ フォルダー** (省略可能):最大 127 文字でプログラムの実行元フォルダーを指定します。 このフォルダーには、クライアント上の絶対パスを指定できます。 また、パッケージを含む配布ポイント フォルダーの相対パスを指定することもできます。

    - **Run**:クライアント コンピューターでプログラムを実行する際のモードを指定します。 次のいずれかのオプションを選択します。  

        - **標準**:システムとプログラムの既定に応じた通常モードで動作します。 このモードが既定値です。  

        - **最小化**:プログラムはクライアント デバイスで最小化されて実行されます。 インストール状況は、通知エリアやタスク バーに表示される場合があります。  

        - **最大化**:プログラムはクライアント デバイスで最大化されて実行されます。 ユーザーにはすべてのインストール動作が表示されます。  

        - **非表示**:プログラムはクライアント デバイスで非表示で実行されます。 ユーザーにはインストール動作が一切表示されません。  

    - **プログラムの実行条件**:プログラムを、ユーザーがサインインしているときのみ実行するか、サインインしているユーザーがいないときのみ実行するか、またはユーザーがクライアント コンピューターにサインインしているかどうかに関係なく実行するかを指定します。  

    - **実行モード**:プログラムを管理者のアクセス許可で実行するか、現在サインインしているユーザーのアクセス許可で実行するかを指定します。  

    - **プログラムのインストールの表示および対話をユーザーに許可する**:この設定を使用して (使用可能な場合)、ユーザーがプログラムのインストールと対話できるかどうかを指定します。 このオプションは、次の条件が満たされている場合にのみ使用できます。

        - **プログラムの実行条件**設定は、**ユーザーがログオンしていない場合**、または**ユーザーがログオンしているかどうかにかかわらず**
        - **実行モード**設定は、**管理者権限での実行**  

    - **ドライブ モード**:ネットワーク上でこのプログラムを実行する方法に関する情報を指定します。 次のいずれかのオプションを選択します。  

        - **UNC 名で実行する**:プログラムを UNC (汎用名前付け規則) の名前で実行するように指定します。 この設定が既定です。  

        - **ドライブ文字が必要**:プログラムの場所を完全に修飾するためにドライブ文字が必要であることを指定します。 この設定で Configuration Manager クライアントで利用可能なドライブ文字を使用できます。  

        - **特定のドライブ文字が必要**:プログラムの場所を完全に修飾するために指定した特定のドライブ文字が必要であることを指定します。 例: **Z:** 。 指定したドライブ文字が既にクライアントで使用されていると、プログラムは実行されません。  

    - **上のログの配布ポイントに再接続**:ユーザーがサインインしたときに、クライアントが配布ポイントに再接続するかどうかを示します。 既定では、ウィザードはこのオプションを有効にしません。

3. **パッケージとプログラムの作成ウィザード**の **[要件]** ページで、次の情報を指定します。  

    - **別のプログラムを最初に実行**:このパッケージとプログラムが実行される前に実行されるパッケージとプログラムを特定します。  

    - **プラットフォームの要件**: **[任意のプラットフォームで実行可能]** または **[指定したプラットフォームでのみ実行可能]** を選択します。 次に、このパッケージとプログラムをインストールするためにクライアントが必要とする OS バージョンを選択します。  

    - **推定ディスク空き領域**:プログラムをコンピューターで実行するために必要なディスク領域を指定します。 既定の設定は **[不明]** です。 必要に応じて、0 以上の整数を指定します。 値を設定する場合は、値の単位も選択します。  

    - **許容最長実行時間 (分)** :プログラムをクライアント コンピューターで実行する最長時間を指定します。 既定値は **120** 分です。 0 より大きい整数のみを使用してください。  

        > [!IMPORTANT]  
        > このプログラムをデプロイするコレクションにメンテナンス期間を使用している場合は、 **[許容最長実行時間]** がスケジュールされたメンテナンス期間より長いと、競合が発生する可能性があります。 最長実行時間を **不明** に設定すると、プログラムはメンテナンス期間中に開始します。 メンテナンス期間が終了した後、必要に応じて実行し続けます。 最長実行時間をすべてのメンテナンス ウィンドウの長さを超える期間を設定すると、クライアントはプログラムを実行しません。  

        この値 **[不明]** に設定すると、Configuration Manager によって許容最長実行時間が 12 時間 (720 分) に設定されます。  

        > [!NOTE]  
        > プログラムが最長実行時間を超えると、次の条件が満たされた場合に Configuration Manager はそのプログラムを停止します。
        >
        > - **[管理者権限で実行する]** オプションを有効にしている
        > - **[プログラムのインストールの表示および対話をユーザーに許可する]** を有効にしていない  

#### <a name="create-a-device-program"></a>デバイス プログラムを作成する  

1. **パッケージとプログラムの作成ウィザード**の **[プログラムの種類]** ページで、 **[デバイスのプログラム]** を選択してから、 **[次へ]** を選択します。  

2. **[デバイスのプログラム]** ページで、次の設定を指定します。  

    - **名前**:最大 50 文字でプログラムの名前を指定します。  

        > [!NOTE]  
        > プログラム名はパッケージ内で一意である必要があります。 プログラムを作成した後でその名前を変更することはできません。  

    - **コメント** (省略可能):最大 127 文字でデバイス プログラムのコメントを指定します。  

    - **ダウンロード フォルダー**:パッケージのソース ファイルが保存されるデバイス上のフォルダーの名前を指定します。 既定値は `\Temp\` です。  

    - **コマンド ライン**:このプログラムを開始するために使用するコマンド ラインを入力してください。 ファイルの場所を参照するには、 **[参照]** をクリックします。  

    - **コマンド ラインをダウンロード フォルダーで実行する**:ダウンロード フォルダーからプログラムを実行するには、このオプションをオンにします。  

    - **コマンド ラインを次のフォルダーで実行する**:プログラムの実行に別のフォルダーを指定するには、このオプションをオンにします。  

3. **[要件]** ページで、次の設定を指定します。  

    - **推定ディスク空き領域**:ソフトウェアに必要なディスク空き領域を指定します。 クライアントは、モバイル デバイス ユーザーがプログラムをインストールする前に、この値を表示します。  

    - **ダウンロード プログラム**:モバイル デバイスがこのプログラムをダウンロードできるタイミングの情報を指定します。 **[直ちに]** 、 **[高速ネットワーク経由のみ]** 、または **[デバイスがドッキングされているときのみ]** を指定できます。  

    - **追加要件**:このプログラムの追加の要件を指定します。 ソフトウェアをインストールする前に、ユーザーにこれらの要件が表示されます。 たとえば、ユーザーをプログラムを実行する前に、その他のすべてのアプリケーションを閉じる必要があることを通知できます。  

## <a name="deploy-packages-and-programs"></a>パッケージとプログラムを展開する  

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[アプリケーション管理]** を展開して **[パッケージ]** ノードを選択します。  

2. 展開するパッケージを選択してください。 リボンの **[ホーム]** タブの **[展開]** グループで、 **[展開]** を選択します。  

3. **ソフトウェアの展開ウィザード**の **[全般]** ページで、展開するパッケージとプログラムの名前を指定します。 パッケージとプログラムを展開するコレクションと、任意のコメントを選択します。  

    パッケージ コンテンツをコレクションの既定の配布ポイント グループに保存するには、 **[このコレクションに関連付けられている既定の配布ポイント グループを使用する]** オプションを選択します。 このコレクションを配布ポイント グループに関連付けなかった場合、このオプションは使用できません。  

4. **[コンテンツ]** ページで **[追加]** を選択します。 このパッケージとプログラムのコンテンツを展開する配布ポイントまたは配布ポイント グループを選択します。  

5. **[展開設定]** ページで、次の設定を構成します。  

    - **目的**:次のいずれかのオプションを選択します。

        - **利用可能**:ユーザーは、パッケージとプログラムをソフトウェア センターで表示して、必要に応じてパッケージとプログラムをインストールできます。  

        - **必須**:パッケージとプログラムは、構成されたスケジュールに従って自動的に展開されます。 ソフトウェア センターでは、展開ステータスを追跡し、期限前にインストールすることができます。  

        > [!NOTE]
        > デバイスに複数のユーザーがサインインしている場合、パッケージとタスク シーケンスの展開がソフトウェア センターに表示されない場合があります。

    - **ウェイクアップ パケットを送信する**:展開の目的を **[必須]** に設定し、このオプションを選択した場合、サイトはインストールの期限時、コンピューターにウェイクアップパケットを最初に送信します。 このオプションを使用する前に、コンピューターを Wake On LAN 用に構成します。 詳細については、[Wake On LAN を構成する方法](../../core/clients/deploy/configure-wake-on-lan.md)に関するページを参照してください。  

    - **インストールの期限後、クライアントが従量制のインターネット接続を使用してコンテンツをダウンロードできるようにする (追加料金が生じる可能性があります)**  

    > [!NOTE]  
    > **[ユーザーのプライマリ デバイスにソフトウェアを事前に展開する]** オプションは、パッケージとプログラムを展開するときには使用できません。  

6. **[スケジュール]** ページで、このパッケージとプログラムをクライアント デバイスに展開するタイミングを構成します。  

    このページのオプションは、展開操作を **[利用可能]** または **[必須]** のどちらに設定するかによって変わります。  

    **[必須]** の展開の場合は、 **[再実行の動作]** ドロップダウン メニューで、プログラムの再実行の動作を構成します。 次のオプションを選択します。  

    | 再実行の動作 | [説明] |
    |----------------|-------------|
    | **展開されたプログラムを再実行しない** | クライアントはプログラムを再実行しません。 プログラムが最初に失敗または、プログラム ファイルが変更された場合でも、この動作になります。 |
    | **プログラムを常に再実行する** | 展開がスケジュールされていると、プログラムは常にクライアントで再実行されます。 この動作は、プログラムが既に正常に実行されている場合でも発生します。 これは、プログラムを更新するときに繰り返し展開する場合に便利です。 |
    | **前回失敗した場合に再実行する** | 展開がスケジュールされているときは、以前に実行を試みたときに失敗した場合のみ、クライアントによってプログラムが再実行されます。 |
    | **前回の試行に成功した場合は再実行する** | 以前にクライアントで正常に実行された場合にのみ、クライアントによってプログラムが再実行されます。 この動作は、プログラムを定期的に更新し、更新のたびに前回の更新が正常にインストールされている必要がある、反復的な展開をする場合に便利です。 |

7. **[ユーザー側の表示と操作]** ページで、次の情報を指定します。  

    - **[割り当てられたプログラムの個別の実行をユーザーに許可する]** :ユーザーは、スケジュールされているインストール時刻に関係なく、このソフトウェアをソフトウェア センターからインストールできます。  

    - **[ソフトウェアのインストール]** :構成されたメンテナンス期間外でソフトウェアをインストールできます。  

    - **[システムの再起動 (インストールの完了に必要な場合)]** :ソフトウェアのインストールを完了するためにデバイスの再起動が必要な場合は、構成されたメンテナンス期間外でこの操作を実行することを許可します。  

    - **[埋め込みデバイス]** :書き込みフィルターが有効になっている Windows Embedded デバイスにパッケージとプログラムを展開する場合、一時的なオーバーレイにパッケージとプログラムをインストールするように指定し、後で変更をコミットできます。 あるいは、インストールの期限またはメンテナンス期間中に変更をコミットします。 インストールの期限またはメンテナンス期間中に変更をコミットする場合は、再起動が必要になります。再起動すると、デバイスに変更が保持されます。  

        > [!NOTE]  
        > パッケージまたはプログラムを Windows Embedded デバイスに展開するときに、デバイスを構成されたメンテナンス ウィンドウを持つコレクションのメンバーであることを確認します。 Windows Embedded デバイスにパッケージとプログラムを展開する場合にメンテナンス期間を使用する方法の詳細については、「[Windows Embedded アプリケーションの作成](../get-started/creating-windows-embedded-applications.md)」を参照してください。  

8. **[配布ポイント]** ページで、次の情報を指定します。  

    - **展開オプション**:現在の境界グループ内の配布ポイントを使用するときのクライアントのアクションを指定します。 また、クライアントが近隣の境界グループまたは既定サイトの境界グループから配布ポイントを使用するときのアクションを選択します。

        > [!IMPORTANT]  
        > **[配布ポイントからプログラムを実行する]** 展開オプションを構成した場合、[パッケージ] プロパティの **[データ アクセス]** タブで **[このパッケージのコンテンツを配布ポイントのパッケージ共有にコピーする]** 設定を有効にしてください。 そうしないと、パッケージを配布ポイントから実行することはできません。  

    - **既定サイトの境界グループからの配布ポイントの使用をクライアントに許可する**:このコンテンツが現在または近隣の境界グループの配布ポイントから使用できない場合は、このオプションを有効にして、サイトの既定の境界グループ内の配布ポイントを試せるようにします。

9. ウィザードを完了します。  

展開を選択すると、 **[監視]** ワークスペースの **[展開]** ノードおよび [パッケージ展開] タブの詳細ウィンドウに展開が表示されます。 詳しくは、「[パッケージとプログラムを監視する](#monitor-packages-and-programs)」を参照してください。  


## <a name="monitor-packages-and-programs"></a>パッケージとプログラムを監視する

パッケージおよびプログラムの展開を監視するには、「[アプリケーションの監視](monitor-applications-from-the-console.md)」で詳しく説明されている、アプリケーションを監視する場合と同じ方法を使用できます。  

また、パッケージとプログラムには、パッケージとプログラムの展開状況の情報を監視できる、複数の組み込みレポートも含まれています。 これらのレポートのレポート カテゴリをある **ソフトウェアの配布-パッケージとプログラム** と **ソフトウェアの配布-パッケージとプログラムの展開ステータス**です。  

Configuration Manager でのレポートの構成方法について詳しくは、「[レポートの概要](../../core/servers/manage/introduction-to-reporting.md)」をご覧ください。  


## <a name="manage-packages-and-programs"></a>パッケージとプログラムを管理する

**[ソフトウェア ライブラリ]** ワークスペースで、 **[アプリケーション管理]** を展開して **[パッケージ]** ノードを選択します。 管理するパッケージを選択し、管理タスクを選択します。  

### <a name="create-prestage-content-file"></a>事前設定コンテンツ ファイルの作成

**事前設定コンテンツ ファイルの作成ウィザード**を開き、パッケージ コンテンツを含むファイルを作成します。 リモート配布ポイントにパッケージを手動でインポートするには、このファイルを使用します。 このアクションは、サイト サーバーと配布ポイント間のネットワーク帯域幅が低い場合に便利です。

### <a name="create-program"></a>プログラムの作成

**プログラムの作成ウィザード**を開き、このパッケージに新しいプログラムを作成します。

### <a name="export"></a>エクスポート

**パッケージのエクスポート ウィザード**を開き、選択したパッケージとそのコンテンツをファイルにエクスポートします。 ファイルを別の階層にインポートするには、このファイルを使用します。

パッケージとプログラムをインポートする方法については、「[パッケージとプログラムを作成する](#create-a-package-and-program)」を参照してください。

### <a name="deploy"></a>デプロイ

**ソフトウェアの展開ウィザード**を開き、選択したパッケージとプログラムをコレクションに展開します。 詳しくは、「[パッケージとプログラムを展開する](#deploy-packages-and-programs)」を参照してください。

### <a name="distribute-content"></a>コンテンツの配布

**コンテンツの配布ウィザード**を開き、パッケージやプログラムのコンテンツを選択された配布ポイントまたは配布ポイント グループに送信します。

### <a name="update-distribution-points"></a>配布ポイントの更新

配布ポイントを選択されたパッケージやプログラムの最新のコンテンツで更新します。


## <a name="see-also"></a>関連項目

- [スクリプト](create-deploy-scripts.md)

- [パッケージ変換マネージャー](../pcm/package-conversion-manager.md)

- [パッケージ定義ファイル](package-definition-files.md)
