---
title: 高可用性
titleSuffix: Configuration Manager
description: 利用可能なサービスを高いレベルで維持するためのオプションを利用し、Configuration Manager を展開する方法について説明します。
ms.date: 11/29/2019
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 1a38421d-24c1-4fef-bf6c-42fce53109ac
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 32083deb30d3d7345ccad8d31541d3c641eb10c0
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/21/2020
ms.locfileid: "81707270"
---
# <a name="high-availability-options-for-configuration-manager"></a>Configuration Manager の高可用性オプション

*適用対象:Configuration Manager (Current Branch)*

この記事では、利用可能なサービスを高いレベルで維持するためのオプションを利用し、Configuration Manager を展開する方法について説明します。

次の Configuration Manager のオプションでは、高可用性がサポートされています。

- パッシブ モードのサイト サーバーを追加してスタンドアロン プライマリ サイトを構成する。  

- プライマリ サイトと中央管理サイトのサイト データベースに対して SQL Server AlwaysOn 可用性グループを構成する。

- 重要なサービスをクライアントに提供するサイト システムの役割の複数のインスタンスをサイトがサポートする。 たとえば、管理ポイントと配布ポイントです。  

- 中央管理サイトおよびプライマリ サイトが、サイト データベースのバックアップをサポートする。 サイト データベースにサイトとクライアントのすべての構成が格納されます。 階層内のサイトはこの構成データを共有します。  

- 組み込みのサイト回復オプションではサーバーのダウンタイムを削減できる。 この詳細設定オプションにより、中央管理サイトを持つ階層の場合に回復が簡略化されます。  

- クライアントは、管理者が操作しなくても、よくある問題を自動的に修復できる。  

- サイトが最新のデータを送信しなかったクライアントに関するアラートを生成し、管理者に潜在的な問題を警告する。  

- Configuration Manager はいくつかの組み込みのレポートとダッシュボードを提供する。 これらを使用しして、サーバーまたはクライアントの操作に問題が生じる前に、問題および傾向を識別します。  

Configuration Manager には、ほぼリアルタイムでサービスを提供するいくつかの機能が含まれています。 ビジネス要件を満たすためにこれらの機能が重要である場合は、高可用性を考慮してサイトおよび階層を計画して構成します。 次に例を示します。  

- 再起動、Windows Defender スキャンの開始、リモート デスクトップなどの[クライアント通知アクション](../../../clients/manage/manage-clients.md)。  

- ソフトウェア更新プログラムやエンドポイント保護などの機能を監視するための、状態に基づくメッセージ。

- [スクリプト](../../../../apps/deploy-use/create-deploy-scripts.md)

- [CMPivot](../../manage/cmpivot.md)

Configuration Manager のその他の機能には、リアルタイムのサービスを提供しないものもあります。 これらの機能には、クライアント設定、ハードウェアとソフトウェアのインベントリ、ソフトウェアの展開、コンプライアンス設定が含まれますが、これらに限定されません。 これらの機能の動作時には、多少のデータ待機時間が予期されます。 サービスが一時的に中断されている場合に、重大な問題が発生している可能性はかなり低くなります。 ダウンタイムを最小限に抑え、操作の独立性を維持し、高いレベルのサービスを提供するには、高可用性を考慮してサイトおよび階層を構成します。  

たとえば、Configuration Manager クライアントは、通常、設定されている操作のスケジュールと構成、およびサイトにデータを送信する処理のスケジュールによって自律的に動作します。  

- クライアントがサイトに接続できない場合は、サイトに接続できるまで、送信するデータをキャッシュします。  

- サイトに接続できないクライアントは動作を続けます。 これらのクライアントは、サイトに接続して新しいポリシーを取得できるようになるまで、最後に認識したスケジュールおよびキャッシュされた情報を使用します。 たとえば、クライアントが、実行またはインストールする必要がある、以前にダウンロードしたアプリケーションを保持しているとします。

- サイトは、そのサイト システムおよびクライアントのステータスが定期的に更新されることを監視します。 これらのコンポーネントが登録されない場合、サイトはアラートを生成できます。  

- 組み込みレポートを使用すると、実行中の操作、過去の操作、および現在の傾向を把握できます。 Configuration Manager はまた、実行中の操作のほぼリアルタイムの情報を提供する、状態に基づいたメッセージをサポートしています。  


## <a name="high-availability-for-sites-and-hierarchies"></a><a name="bkmk_snh"></a> サイトと階層の高可用性  

### <a name="use-a-site-server-in-passive-mode"></a>サイト サーバーをパッシブ モードで使用する

スタンドアロン プライマリ サイト用に "*パッシブ*" モードで追加のサイト サーバーをインストールします。 パッシブ モードのサイト サーバーは、*アクティブ* モードになっている既存のサイト サーバーに加えられます。 パッシブ モードのサイト サーバーは、必要なときにすぐに使用できます。 詳細については、[サイト サーバーの高可用性](site-server-high-availability.md)に関するページを参照してください。  

### <a name="use-a-remote-content-library"></a>リモート コンテンツ ライブラリを使用する

高可用性ストレージを提供するリモートの場所に、サイトのコンテンツ ライブラリを移動します。 この機能は、サイト サーバーの高可用性に対する要件です。 詳細については、[コンテンツ ライブラリ](../../../plan-design/hierarchy/the-content-library.md#bkmk_remote)に関するページを参照してください。

### <a name="centralize-content-sources"></a>コンテンツ ソースを集中管理する

Configuration Manager のすべてのソフトウェア コンテンツは、ネットワーク上のパッケージ ソースの場所を必要とします。 すべてのコンテンツに共通のパッケージ ソースの場所をホストするには、集中管理された高可用性ストレージを使用します。

### <a name="use-a-sql-server-always-on-availability-group-to-host-the-site-database"></a>SQL Server AlwaysOn 可用性グループを使用してサイト データベースをホストする

SQL Server AlwaysOn 可用性グループ上のプライマリ サイトと中央管理サイトで、サイト データベースをホストします。 詳細については、[高可用性サイト データベースの SQL Server AlwaysOn](sql-server-alwayson-for-a-highly-available-site-database.md) に関するページを参照してください。  

### <a name="use-a-sql-server-cluster-to-host-the-site-database"></a>SQL Server クラスターを使用したサイト データベースのホスティング

中央管理サイトまたはプライマリ サイトのデータベースに SQL Server クラスターを使用する場合は、SQL Server に組み込まれているフェールオーバーのサポートを使用します。  

セカンダリ サイトは、SQL Server クラスターを使用できず、サイト データベースのバックアップまたは復元はサポートされません。 セカンダリ サイトを回復するには、親プライマリ サイトからそのセカンダリ サイトを再インストールします。  

### <a name="deploy-a-hierarchy-of-sites-with-a-central-administration-site-and-one-or-more-child-primary-sites"></a>中央管理サイトおよび 1 つまたは複数の子プライマリ サイトを持つサイトの階層を展開する

この構成では、サイトが冗長なネットワークのセグメントを管理する場合に、フォールト トレランスを提供できます。 また、別のサイトで利用できる共有データベースの情報を使用して、回復するサイトのサイト データベースを再構築する追加の回復オプションを利用することもできます。 このオプションを使用して、エラーが発生したサイト データベースの失敗したバックアップまたは利用できないバックアップの代わりにします。  

### <a name="create-regular-backups-at-central-administration-sites-and-primary-sites"></a>中央管理サイトおよびプライマリ サイトで定期的にバックアップを作成する

定期的にサイトのバックアップを作成してテストすると、サイトを回復するために必要なデータがあることを確認できます。 最小限の時間でサイトを回復する練習も行います。  

### <a name="install-multiple-instances-of-site-system-roles"></a>複数のサイト システムの役割のインスタンスのインストール

重要なサイト システムの役割のインスタンスを複数インストールすると、クライアントのための冗長な接続ポイントを用意できます。 たとえば、複数の管理ポイントや配布ポイントは、特定のサーバーがオフラインの場合に冗長なサービスを提供できます。  

### <a name="install-multiple-instances-of-the-sms-provider-at-a-site"></a>サイトに複数の SMS プロバイダーのインスタンスをインストールする

SMS プロバイダーは、1 つまたは複数の Configuration Manager コンソールの管理のための接続ポイントとなります。 サイトおよび階層を管理するための冗長な接続ポイントを提供するには、複数の SMS プロバイダーをインストールします。  


## <a name="high-availability-for-site-system-roles"></a><a name="bkmk_ssr"></a> サイト システムの役割の高可用性

管理者は、各サイトにサイト システムの役割を展開して、そのサイトでクライアントが使用するサービスを提供します。 サイト データベースには、サイトおよびすべてのクライアントの構成情報が含まれています。 1 つまたは複数の利用可能なオプションを使用して、サイト データベースの高可用性を向上させたり、必要な場合にサイトおよびサイト データベースの回復を行なったりします。  

### <a name="redundancy-for-important-site-system-roles"></a>重要なサイト システムの役割の冗長化

- アプリケーション カタログ Web サービス ポイント  

- アプリケーション カタログ Web サイト ポイント  

- 配布ポイント  

- 管理ポイント  

- ソフトウェアの更新ポイント  

- 状態移行ポイント  

サイトおよびクライアントでのレポート処理を冗長にするには、レポート サービス ポイントのインスタンスを複数インストールします。

ソフトウェア更新ポイントでのフェールオーバーをサポートするには、Windows PowerShell を使用して、Windows ネットワーク負荷分散 (NLB) クラスターにこの役割をインストールします。  

### <a name="built-in-site-backup"></a>組み込みのサイト バックアップ

Configuration Manager には、組み込みのバックアップ タスクが含まれており、定期的なスケジュールでサイトおよび重要な情報をバックアップするために使用できます。 また、Configuration Manager セットアップ ウィザードは、サイトを稼動状態に復元するためのサイトの復元アクションをサポートしています。  

### <a name="publishing-to-active-directory-domain-services-and-dns"></a>Active Directory Domain Services および DNS への発行

サイトに関するデータを Active Directory Domain Services および DNS に発行するように、各サイトを構成します。 この発行により、クライアントは、ネットワーク上の最もアクセスしやすいサーバーを識別できます。 また、クライアントはこのデータを使用して、重要なサービスを提供する新しいサイト システム サーバー (管理ポイントなど) が利用可能になったときにそれを識別することもできます。  

### <a name="sms-provider-and-configuration-manager-console"></a>SMS プロバイダーと Configuration Manager コンソール

Configuration Manager では、コンソールに対する複数のアクセス ポイントとして、複数の SMS プロバイダーをそれぞれ別のサーバーにインストールできます。 1 つの SMS プロバイダー サーバーがオフラインであっても、サイトとクライアントを引き続き表示および管理できます。  

Configuration Manager コンソールをサイトに接続すると、そのサイトの SMS プロバイダーのインスタンスに接続されます。 SMS プロバイダーのインスタンスはランダムに選択されます。 選択した SMS プロバイダーが利用できない場合は、次のオプションがあります。  

- コンソールをサイトに再接続します。 新しい各接続要求は、SMS プロバイダーのインスタンスにランダムに割り当てられます。 新しい接続が、利用可能なインスタンスに割り当てられる可能性があります。  

- コンソールを別の Configuration Manager サイトに接続して、その接続から構成を管理します。 このオプションでは、構成の変更が多少遅れます (数分以内)。 サイトの SMS プロバイダーがオンラインに戻ったら、Configuration Manager コンソールを管理対象のサイトに直接再接続します。  

管理者が使用できるように、Configuration Manager コンソールを複数のコンピューターにインストールします。 各 SMS プロバイダーは、複数のコンソールからの接続をサポートしています。  

### <a name="management-point"></a>管理ポイント

各プライマリ サイトに複数の管理ポイントをインストールして、それらのサイトが Active Directory インフラストラクチャおよび DNS にサイト データを発行できるようにします。  

複数の管理ポイントを使用すると、複数のクライアントによって使用される各管理ポイントを負荷分散できます。 管理ポイントの 1 つまたは複数のデータベース レプリカをインストールすることも検討してください。 この構成では、プロセッサ負荷の高い管理ポイントの操作が減少します。 また、この重要なサイト システムの役割の可用性が高まります。  

セカンダリ サイトにインストールできる管理ポイントは 1 つのみです。これは、セカンダリ サイト サーバーに配置する必要があります。 セカンダリ サイトの管理ポイントは、高可用構成を持つと見なされません。  

> [!NOTE]  
> オンプレミスのモバイル デバイス管理で管理されているデバイスは、プライマリ サイトの 1 つだけの管理ポイントに接続します。 管理ポイントは、登録時に Configuration Manager によってモバイル デバイスに割り当てられ、その後は変更されません。 複数の管理ポイントをインストールして、モバイル デバイスに対して複数を有効にすると、管理ポイントはモバイル デバイスのクライアントにランダムに割り当てられます。  
>
> モバイル デバイス クライアントが使用している管理ポイントが利用できなくなった場合は、この管理ポイントの問題を解決するか、モバイル デバイスに対して有効にされている稼働状態の管理ポイントに割り当てることができるように、モバイル デバイスをワイプして再登録する必要があります。  

### <a name="distribution-point"></a>配布ポイント

複数の配布ポイントをインストールし、コンテンツを複数の配布ポイントに展開します。 境界グループごとに複数の配布ポイントを追加して、クライアントがコンテンツ要求で複数のオプションを取得するようにします。 別の境界グループまたはクラウド配布ポイントへの予測可能なフォールバック動作を含むように、境界グループのリレーションシップを構成します。 詳細については、[境界グループの構成](boundary-groups.md)に関するページを参照してください。  

### <a name="application-catalog-web-service-point-and-application-catalog-website-point"></a>アプリケーション カタログ Web サービス ポイントとアプリケーション カタログ Web サイト ポイント

> [!Important]
> アプリケーション カタログの Silverlight ユーザー エクスペリエンスは、Current Branch バージョン 1806 以降では、サポートされません。 バージョン 1906 以降では、更新されたクライアントで、ユーザーが利用できるアプリケーション展開の管理ポイントが自動的に使用されます。 また、新しいアプリケーション カタログの役割はインストールできません。 アプリケーション カタログの役割のサポートは、バージョン 1910 で終了します。  
>
> 詳細については、以下の記事を参照してください。
>
> - [ソフトウェア センターの構成](../../../../apps/plan-design/plan-for-software-center.md#bkmk_userex)
> - [削除された機能と非推奨の機能](../../../plan-design/changes/deprecated/removed-and-deprecated-cmfeatures.md)  

各サイト システムの役割のインスタンスを複数インストールします。 最適なパフォーマンスを実現するには、それぞれ 1 つを同じサイト システム サーバーに展開します。  

各アプリケーション カタログ サイト システムの役割は、階層内の場所に関係なく、その役割の他のインスタンスと同じ情報を提供します。 クライアントがアプリケーション カタログを要求するときに、クライアントが既定のアプリケーション カタログ Web サイト ポイントを自動的に検出するように構成してある場合、クライアントは使用可能なインスタンスに振り向けられます。 クライアントの現在のネットワークの場所に基づき、クライアントはローカルのアプリケーション カタログ インスタンスを優先します。  

このクライアント設定および自動検出のしくについて詳しくは、「[コンピューター エージェント](../../../clients/deploy/about-client-settings.md#computer-agent)」のクライアント設定を参照してください。  


## <a name="high-availability-for-clients"></a><a name="bkmk_client"></a> クライアントの高可用性  

### <a name="client-operations-are-autonomous"></a>クライアントの操作が独立している

Configuration Manager クライアントの独立性を実現する機能には、次の動作が含まれます。  

- クライアントは特定のサイト システム サーバーとの持続的な接続を要求しません。 クライアントは、認識されている構成を使用して、スケジュールに事前に構成されているアクションを実行します。  

- クライアントは、サービスをクライアントに提供する任意の利用可能なサイト システムの役割のインスタンスを使用できます。 クライアントは、利用可能なサーバーが見つかるまで既知のサーバーへの接続を試みます。  

- クライアントは、サイト システム サーバーに直接接続していなくても、インベントリ、ソフトウェアの展開、および同様のスケジュールされたアクションを実行できます。  

- フォールバック ステータス ポイントを使用するように構成されているクライアントは、管理ポイントと通信できない場合、フォールバック ステータス ポイントに詳細を送信できます。  

### <a name="clients-can-repair-themselves"></a>クライアントがそれ自体を修復できる

クライアントは、管理者が直接に介入しなくても、ほとんどの一般的な問題を自動的に修復します。  

- クライアントは、定期的にそれ自体のステータスを自己評価します。 クライアントは、修復手順および修復用のソース ファイルのローカル キャッシュを使用して、よくある問題を修復するための対応を行います。  

- クライアントがサイトへのステータス情報の送信に失敗すると、サイトがアラートを生成することがあります。 これらのアラートを受け取った管理ユーザーは、クライアントの通常の動作を復元するための対応を直ちに行なうことができます。  

### <a name="clients-cache-information-to-use-in-the-future"></a>クライアントが今後使用する情報をキャッシュする

クライアントは、管理ポイントと通信するときに、次の情報を取得およびキャッシュできます。  

- クライアント設定  

- クライアントのスケジュール  

- クライアントへのインストールがスケジュールされているソフトウェアのダウンロードおよびソフトウェアの展開に関する情報 (展開にこの操作が構成されている場合)。  

クライアントが管理ポイントに接続できない場合、クライアントはステータス、状態、およびサイトに報告するクライアントの情報をローカルにキャッシュします。 クライアントは、管理ポイントとの接続が確立された後にこのデータを転送します。  

### <a name="client-can-submit-status-to-a-fallback-status-point"></a>クライアントがフォールバック ステータス ポイントにステータスを送信できる

フォールバック ステータス ポイントを使用するようにクライアントを構成すると、クライアントが操作に関する重要な詳細情報を送信する接続ポイントが追加されます。 フォールバック ステータス ポイントを使用するように構成されているクライアントは、管理ポイントと通信できない場合でも、フォールバック ステータス ポイントのサイト システムの役割に操作のステータスを送信します。  

### <a name="central-management-of-client-data-and-client-identity"></a>クライアントのデータおよびクライアントの識別の集中管理

各クライアントの識別に関する重要な情報は、個々のクライアントではなくサイト データベースで保持され、そのデータが特定のコンピューターまたはユーザーに関連付けられます。  

- クライアントがインストールされているコンピューターの履歴レコードに影響を与えずに、コンピューター上のクライアントのソース ファイルをアンインストールおよび再インストールできます。  

- クライアント コンピューターでエラーが発生しても、データベースに格納されている情報の整合性には影響しません。 この情報は報告のために引き続き使用できます。  


## <a name="options-for-sites-and-site-system-roles-that-arent-highly-available"></a><a name="bkmk_nonHAoptions"></a> 利用可能性が高くないサイトおよびサイト システムの役割のオプション

いくつかのサイト システムは、サイトまたは階層で複数のインスタンスをサポートしていません。 この情報は、オフラインになるこれらのサイト システムを準備するのに役立ちます。  

### <a name="asset-intelligence-synchronization-point-hierarchy"></a>資産インテリジェンス同期ポイント (階層)

このサイト システムの役割は、重要ではないと見なされており、Configuration Manager のオプションの機能を提供します。 サイト システムがオフラインになった場合は、次のいずれかのオプションを使用します。  

- サイト システムがオフラインになった理由を解決します。  

- 現在のサーバーから役割をアンインストールし、新しいサーバーに役割をインストールします。  

### <a name="endpoint-protection-point-hierarchy"></a>Endpoint Protection ポイント (階層)

このサイト システムの役割は、重要ではないと見なされており、Configuration Manager のオプションの機能を提供します。 サイト システムがオフラインになった場合は、次のいずれかのオプションを使用します。  

- サイト システムがオフラインになった理由を解決します。  

- 現在のサーバーから役割をアンインストールし、新しいサーバーに役割をインストールします。  

### <a name="enrollment-point-site"></a>登録ポイント (サイト)

このサイト システムの役割は、重要ではないと見なされており、Configuration Manager のオプションの機能を提供します。 サイト システムがオフラインになった場合は、次のいずれかのオプションを使用します。  

- サイト システムがオフラインになった理由を解決します。  

- 現在のサーバーから役割をアンインストールし、新しいサーバーに役割をインストールします。  

### <a name="enrollment-proxy-point-site"></a>登録プロキシ ポイント (サイト)

このサイト システムの役割は、重要ではないと見なされており、Configuration Manager のオプションの機能を提供します。 ただし、このサイト システムの役割の複数のインスタンスを階層内の単一のサイトおよび複数のサイトにインストールできます。 サイト システムがオフラインになった場合は、次のいずれかのオプションを使用します。  

- サイト システムがオフラインになった理由を解決します。  

- 現在のサーバーから役割をアンインストールし、新しいサーバーに役割をインストールします。  

サイトに複数の登録プロキシ サーバーがある場合、サーバー名に DNS エイリアスを使用します。 この構成を使用すると、ユーザーがモバイル デバイスを登録するときに、DNS ラウンド ロビンによって、多少のフォールト トレランスおよび負荷分散が提供されます。  

### <a name="fallback-status-point-site-or-hierarchy"></a>フォールバック ステータス ポイント (サイトまたは階層)

このサイト システムの役割は、重要ではないと見なされており、Configuration Manager のオプションの機能を提供します。 サイト システムがオフラインになった場合は、次のいずれかのオプションを使用します。  

- サイト システムがオフラインになった理由を解決します。  

- 現在のサーバーから役割をアンインストールし、新しいサーバーに役割をインストールします。 クライアントのインストール時にクライアントがフォールバック ステータス ポイントに割り当てられるため、新しいサイト システム サーバーを使用するように既存のクライアントを変更する必要があります。  

### <a name="service-connection-point-hierarchy"></a>サービス接続ポイント (階層)

このサイト システムの役割は、Configuration Manager の現在のブランチを最新に保つために重要ですが、通常は頻繁には使用されません。 このシステムがオフラインになった場合は、次のいずれかのオプションを使用します。

- サイト システムがオフラインになった理由を解決します。  

- 現在のサーバーから役割をアンインストールし、新しいサーバーに役割をインストールします。  


## <a name="see-also"></a>関連項目

- [サポートされている構成](../../../plan-design/configs/supported-configurations.md)  

- [推奨ハードウェア](../../../plan-design/configs/recommended-hardware.md)  

- [サイト システム サーバーのサポートされるオペレーティング システム](../../../plan-design/configs/supported-operating-systems-for-site-system-servers.md)

- [サイトとサイト システムの前提条件](../../../plan-design/configs/site-and-site-system-prerequisites.md)  

- [サイト障害の影響](../../manage/site-failure-impacts.md)  
