---
title: レポートの操作とメンテナンス
titleSuffix: Configuration Manager
description: Configuration Manager でのレポートおよびレポートのサブスクリプションの管理の詳細について説明します。
ms.date: 04/01/2020
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: b89bcfbf-f5b6-4fb1-bb5e-a5cc18ec0c78
author: aczechowski
manager: dougeby
ms.author: aaroncz
ms.openlocfilehash: 414d1138a7682d6b9acbc7731035fff1842a1fe7
ms.sourcegitcommit: c1afc8abd0d7da48815bd2b0e45147774c72c2df
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/05/2020
ms.locfileid: "87815414"
---
# <a name="operations-and-maintenance-for-reporting-in-configuration-manager"></a>Configuration Manager のレポートの操作とメンテナンス

*適用対象:Configuration Manager (Current Branch)*

Configuration Manager にレポートのためのインフラストラクチャを準備した後、レポートおよびレポートのサブスクリプションを管理するために通常行う多くの操作があります。

> [!NOTE]
> この記事は、SQL Server Reporting Services のレポートに焦点を当てています。 バージョン 2002 以降では、Power BI Report Server をレポートと統合できるようになりました。 詳細については、「[Power BI Report Server との統合](powerbi-report-server.md)」を参照してください。

## <a name="run-a-report-from-reporting-services"></a>Reporting Services からレポートを実行する

Configuration Manager は、SQL Server Reporting Services にレポートを保存します。 レポートは、Configuration Manager サイト データベースからデータを取得します。 Configuration Manager コンソールで、または Web ブラウザー経由でレポート マネージャーを使用してレポートを表示できます。 レポート サービス ポイントにアクセスできる任意のコンピューターの Web ブラウザーで、ユーザーにレポートを表示するための十分な権限があればレポートを開くことができます。 レポートを実行するには、**サイト**の**読み取り**権限アクセス許可と特定のオブジェクト用の**レポートの実行**アクセス許可が必要です。

レポートを実行すると、レポートのタイトル、説明、およびカテゴリが、ローカルの OS の言語で表示されます。 詳細については、「[レポートの言語](configuring-reporting.md#-languages-for-reports)」をご覧ください。

> [!NOTE]  
> レポート マネージャーは、Web ベースのレポートのアクセスと管理ツールです。 これを使用すると、HTTPS 接続を介して 1 つのレポートサーバー インスタンスを管理できます。 レポート マネージャーは、レポートの表示、レポートのプロパティの変更、および関連付けられているレポートのサブスクリプションの管理などの操作タスクに使用できます。 この記事では、レポート マネージャーでレポートを表示し、レポートのプロパティを変更する手順について説明します。 レポート マネージャーのその他のオプションの詳細については、「[レポートマネージャーとは](https://docs.microsoft.com/sql/reporting-services/report-server/manage-a-reporting-services-native-mode-report-server)」を参照してください。

Configuration Manager レポートを実行するのにには、次の手順を使用します。

### <a name="run-a-report-in-the-configuration-manager-console"></a>Configuration Manager コンソールでレポートを実行する

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動します。 **[レポート]** を展開し、次に **[レポート]** を選択します。 このノードでは、利用可能なレポートが一覧表示されます。

    > [!TIP]
    > ノードがレポートを表示しない場合は、レポート サービス ポイントがインストールおよび構成されていることを確認します。 詳しくは、[レポートの構成](configuring-reporting.md)に関するページをご覧ください。

1. 実行するレポートを選択します。 リボンの **[ホーム]** タブの **[レポート グループ]** セクションで、 **[実行]** を選択してレポートを開きます。

1. 必須のパラメーターがある場合は、パラメーターを指定して、 **[レポートの表示]** を選択します。

### <a name="run-a-report-in-a-web-browser"></a>Web ブラウザーでレポートを実行する

1. Web ブラウザーで、レポート マネージャーの URL を入力します (例: `https://Server1/Reports`)。 Reporting Services 構成マネージャーの **[レポート マネージャーの URL]** ページでこのアドレスを探します。

1. レポート マネージャーでは、Configuration Manager 用の、たとえば **ConfigMgr_CAS** レポート フォルダーを選択します。

    > [!TIP]
    > レポート マネージャーがレポートを表示しない場合は、レポート サービス ポイントがインストールおよび構成されていることを確認します。 詳しくは、[レポートの構成](configuring-reporting.md)に関するページをご覧ください。

1. 実行するレポートのレポート カテゴリを選択して、特定のレポートを選択します。 レポート マネージャーでレポートが開きます。

1. 必須のパラメーターがある場合は、パラメーターを指定して、 **[レポートの表示]** を選択します。

## <a name="modify-the-properties-of-a-report"></a>レポートのプロパティの変更

レポートのプロパティには、レポート名と説明が含まれます。 レポートのプロパティを表示するには、Configuration Manager コンソールを使用します。

プロパティを変更するには、レポート マネージャーを使用します。

1. Web ブラウザーで、レポート マネージャーの URL を入力します (例: `https://Server1/Reports`)。

1. レポート マネージャーでは、Configuration Manager 用の、たとえば **ConfigMgr_CAS** レポート フォルダーを選択します。

1. レポート カテゴリを選択し、特定のレポートを選択します。 レポート マネージャーでレポートが開きます。

1. **[プロパティ]** タブを選択します。レポート名および説明を変更し、 **[適用]** を選択します。

レポート マネージャーは、レポート サーバーにレポートのプロパティを保存します。 Configuration Manager コンソールには、レポートの更新されたレポートのプロパティが表示されます。

## <a name="edit-a-report"></a><a name="bkmk_edit"></a> レポートの編集

既存の Configuration Manager レポートで必要な情報が取得されない場合は、レポート ビルダーで編集します。 また、レポート ビルダーを使用して、レポートのレイアウトやデザインを変更することもできます。 既定のレポートは直接編集できますが、複製することをお勧めします。 レポートを開いて編集し、 **[名前を付けて保存]** を選択します。

レポートを編集するには、レポート内の特定のオブジェクトに対する**サイトの変更**権限と**レポートの変更**権限を持っている必要があります。

> [!IMPORTANT]
> サイトの更新では、組み込みのレポートが保持されます。 標準レポートを変更すると、サイトの更新時に、レポートはアンダースコアのプレフィックス (`_`) が付いた名前に変更されます。 このような動作なので、変更したレポートが、サイトの更新によって標準レポートで上書きされることはありません。
>
> 定義済みレポートを変更する場合は、サイトの更新プログラムをインストールする前に、カスタム レポートをバックアップしてください。 更新後、Reporting Services でレポートを復元します。 事前定義のレポートを大幅に変更した場合は、代わりに新しいレポートを作成してください。 サイトをアップグレードする前に作成した新しいレポートは上書きされません。

Configuration Manager レポートのプロパティを編集するには、次の手順に従います。

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動します。 **[レポート]** を展開し、次に **[レポート]** ノードを選択します。

1. 変更するレポートを選択します。 リボンの **[ホーム]** タブの **[レポート グループ]** セクションで、 **[編集]** を選択します。 資格情報の入力を求められる場合があります。 コンピューターにレポート ビルダーがインストールされていない場合は、Configuration Manager からインストールを求めるメッセージが表示されます。 レポート ビルダーは、レポートを変更および作成するために必要です。

1. レポート ビルダーで、適切なレポート設定を変更します。 **[保存]** を選択して、レポートをレポート サーバーに保存します。

## <a name="create-reports"></a>レポートの作成

作成できるレポートには、次の 2 種類があります。

- **モデル ベースのレポート**では、レポートに含める項目を対話方式で選択できます。 カスタム レポート モデルの作成について詳しくは、「[SQL Server Reporting Services での Configuration Manager のカスタム レポート モデルの作成](creating-custom-report-models-in-sql-server-reporting-services.md)」を参照してください。

- **SQL ベースのレポート**では、レポートの SQL ステートメントに基づいてデータを取得できます。

> [!IMPORTANT]
> 新しいレポートを作成するには、アカウントが **[サイトの変更]** アクセス許可を持っている必要があります。 自分が **[レポートの変更]** アクセス許可を持っているフォルダーにのみレポートを作成できます。

### <a name="create-a-model-based-report"></a>モデル ベースのレポートの作成

モデル ベースの Configuration Manager レポートを作成するには、次の手順のようにします。

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動して、 **[レポート]** を展開し、 **[レポート]** ノードを選択します。

1. リボンの **[ホーム]** タブにある **[作成]** セクションで、 **[レポートの作成]** を選択します。 この操作により、**レポートの作成ウィザード**が開きます。

1. **[情報]** ページで、次の設定を構成します。

    - **種類**: **[モデル ベースのレポート]** を選択します。

    - **名前**:レポートの名前を指定します。

    - **説明**:レポートの説明を指定します。

    - **サーバー**: このレポートを作成するレポート サーバーの名前を表示します。

    - **パス**: **[参照]** を選択して、レポートを格納するフォルダーを指定します。

1. **[モデルの選択]** ページで、このレポートを作成するために利用可能なモデルを一覧から選択します。 **[プレビュー]** セクションには、このレポート モデルで使用できる SQL Server ビューおよびエンティティが表示されます。

1. レポートの作成ウィザードを完了します。

1. レポート ビルダーを開いて、レポート設定を構成します。 詳細については、[Configuration Manager レポートの編集](#bkmk_edit)に関するページをご覧ください。

1. レポート ビルダーで、レポート レイアウトを作成、使用可能な SQL Server のビューのデータを選択、レポートにパラメーターを追加します。

1. **[実行]** を選択して、レポートを実行します。 想定した情報がレポートに表示されていることを確認します。 必要に応じて、 **[デザイン]** を選択して、レポートをさらに変更します。

1. **[保存]** を選択して、レポートをレポート サーバーに保存します。

### <a name="create-a-sql-based-report"></a>SQL ベースのレポートの作成

カスタム レポートの SQL 文を作成する場合、SQL Server テーブルを直接参照しないでください。 サイト データベースから、サポートされているレポート SQL Server ビューを常に参照します。 これらのビューには、`v_` で始まる名前が付いています。 詳細については、「[Configuration Manager で SQL Server ビューを使用してカスタム レポートを作成する](../../../develop/core/understand/sqlviews/create-custom-reports-using-sql-server-views.md)」を参照してください。

また、サイト データベースからパブリック ストアド プロシージャを参照することもできます。 これらのストアド プロシージャには、`sp_` で始まる名前が付いています。

SQL ベースの Configuration Manager レポートを作成するには、次の手順のようにします。

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動して、 **[レポート]** を展開し、 **[レポート]** ノードを選択します。

1. リボンの **[ホーム]** タブにある **[作成]** セクションで、 **[レポートの作成]** を選択します。 この操作により、**レポートの作成ウィザード**が開きます。

1. **[情報]** ページで、次の設定を構成します。

    - **種類**:**SQL ベースのレポート**を選択します。

    - **名前**:レポートの名前を指定します。

    - **説明**:レポートの説明を指定します。

    - **サーバー**: このレポートを作成するレポート サーバーの名前を表示します。

    - **パス**: **[参照]** を選択して、レポートを格納するフォルダーを指定します。

1. レポートの作成ウィザードを完了します。

1. レポート ビルダーを開いて、レポート設定を構成します。 詳細については、[Configuration Manager レポートの編集](#bkmk_edit)に関するページをご覧ください。

1. レポート ビルダーで、レポートの SQL ステートメントを指定します。 また、使用可能なビューの列を使用して SQL ステートメントを作成することもできます。 必要に応じて、パラメーターをレポートに追加します。

1. **[実行]** を選択して、レポートを実行します。 想定した情報がレポートに表示されていることを確認します。 必要に応じて、 **[デザイン]** を選択して、レポートをさらに変更します。

1. **[保存]** を選択して、レポートをレポート サーバーに保存します。

## <a name="manage-report-subscriptions"></a><a name="bkmk_subscription"></a> レポートのサブスクリプションの管理

SQL Server Reporting Services のレポートのサブスクリプションを使用すると、電子メールまたはファイル共有を介して、指定したレポートをスケジュールした間隔で自動的に配信するように構成できます。 レポートのサブスクリプションを構成するには、Configuration Manager の**サブスクリプションの作成ウィザード**を使用します。

### <a name="create-a-report-subscription-to-deliver-a-report-to-a-file-share"></a>レポートのサブスクリプションを作成して、レポートをファイル共有に配信する

レポートのサブスクリプションを作成して、レポートをファイル共有に配信する場合、Reporting Services はレポートを指定したファイル共有に指定された形式でコピーします。 一度にサブスクライブおよび配信を要求できるレポートは 1 つのみです。

ファイル共有を使用するサブスクリプションを作成する場合は、既存の共有フォルダーを配信先として指定します。 レポート サーバーでは、フォルダーまたはネットワーク共有は作成されません。 サブスクリプションに配信先フォルダーを指定する場合は、UNC パスを使用し、フォルダー パスの末尾にバックスラッシュ (`\`) を含めないでください。 たとえば、配信先フォルダーの有効な UNC パスは次のようになります: `\\server\reportfiles\operations\2001`。

> [!NOTE]
> サブスクリプションを作成するときに、ユーザー名とパスワードを指定します。 このアカウントは、コピー先のフォルダーに対する **書き込み** 権限を含めた共有へのアクセス許可が必要です。

Reporting Services では、さまざまなファイル形式でレポートを表示できます。 たとえば、MHTML や Excel などです。 サブスクリプションを作成するときに、形式を選択します。 サポートされている任意の表示形式を選択できますが、ファイルで表示したときの見やすさは形式によって異なります。

### <a name="limitations-for-report-subscriptions-to-a-file-share"></a>ファイル共有に対するレポートのサブスクリプションに関する制限事項

次の一覧には、ファイル共有に対するレポートのサブスクリプションの制限が含まれています。

- レポート サーバーでホストおよび管理するレポートとは異なり、Reporting Services は、レポートを静的ファイルとして共有フォルダーに配信します。

- レポートの対話機能は、ファイルとして格納されているレポートでは機能しません。 レポートは、あらゆる対話機能を静的な要素として表します。

- レポートにグラフが含まれている場合は、既定の表示が使用されます。

- レポートが別のレポートにリンクしている場合は、リンクは静的なテキストとして表示されます。

配信されるレポートの対話機能を維持するには、電子メールでの配信を代わりに使用します。 詳細については、「[レポートのサブスクリプションを作成してメールでレポートを配信する](#bkmk_subscription-email)」をご覧ください。

### <a name="process-to-create-a-report-subscription-for-a-file-share"></a>ファイル共有のレポートのサブスクリプションを作成するプロセス

レポートのサブスクリプションを作成してレポートをファイル共有に配信するには、次の手順に従います。  

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動して、 **[レポート]** を展開し、 **[レポート]** ノードを選択します。

1. レポート フォルダーを選択し、サブスクライブするレポートを選択します。 リボンの **[ホーム]** タブの **[レポート グループ]** セクションで、 **[サブスクリプションの作成]** を選択します。 この操作により、**サブスクリプションの作成ウィザード**が開きます。

1. **[サブスクリプションの配信]** ページで、次の設定を構成します。  

    - **レポートの配信手段**: **[Windows ファイル共有]** を選択します。

    - **[ファイル名]** : レポートのファイル名を指定します。 既定では、レポート ファイルにはファイル名拡張子は含まれません。 形式に基づいてファイル名拡張子を自動的に追加するには、 **[ファイル作成時に拡張子を追加する]** を選択します。

    - **パス**:このレポートを配信する既存のフォルダーへの UNC パスを指定します。 たとえば、`\\server\reportfiles\operations` となります。

    - **表示形式**: レポート ファイルの形式を、次のいずれかから選択します。

      - **レポート データを含む XML ファイル**
      - **CSV (コンマ区切り)**
      - **TIFF ファイル**
      - **Acrobat (PDF) ファイル**
      - **HTML 4.0**
        > [!NOTE]
        > レポートに画像が含まれている場合、HTML 4.0 形式では画像が含まれません。
      - **MHTML (Web アーカイブ)**
      - **RPL レンダラー** (レポート ページ レイアウト)
      - **Excel**
      - **Word**

    - **ユーザー名**: 指定した**パス**に*書き込み*アクセス許可を持つ Windows ユーザー アカウントを指定します。

    - **パスワード**: 上記の Windows ユーザー アカウントのパスワードを指定します。

    - **上書きオプション**:配信先フォルダーに同じ名前のファイルが存在する場合の動作を構成するには、次のいずれかのオプションを選択します。

      - **既存のファイルを新しいバージョンで上書きする**
      - **既存のファイルを上書きしない**
      - **新しいバージョンが追加されるとき、ファイル名の数値を増やす**: このオプションを選択すると、新しいレポートのファイル名に番号が付加され、以前のバージョンと区別されます。

    - **説明**:必要に応じて、このレポートのサブスクリプションに関する追加情報を指定します。

1. **[サブスクリプションのスケジュール]** ページで、レポートのサブスクリプションに次のいずれかの配信スケジュール オプションを選択します。

    - **共有スケジュールを使用する**: 共有スケジュールは以前に定義されたスケジュールで、他のレポートのサブスクリプションで使用することができます。 このオプションを選択した場合は、共有スケジュールも選択します。 共有スケジュールがない場合は、新しいスケジュールを作成するオプションを選択します。

    - **新しいスケジュールを作成する**: このレポートを実行するスケジュールを構成します。 スケジュールには、このサブスクリプションの間隔、開始日時、および終了日が含まれます。 既定では、新しいサブスクリプションは、現在の日付と時刻から 1 時間ごとに実行する新しいスケジュールを作成します。

1. **[サブスクリプションのパラメーター]** ページで、無人で実行するときに必要なこのレポートのパラメーターがあれば指定します。 レポートにパラメーターがない場合、ウィザードではこのページは表示されません。

1. ウィザードを完了します。

1. Configuration Manager によってレポートのサブスクリプションが正常に作成されたことを確認します。 レポートのサブスクリプションを表示および変更するには、 **[サブスクリプション]** ノードを選択します。

### <a name="create-a-report-subscription-to-deliver-a-report-by-email"></a><a name="bkmk_subscription-email"></a> レポートのサブスクリプションを作成して電子メールでレポートを配信する

電子メールでレポートを配信するレポートのサブスクリプションを作成すると、Reporting Services は構成した受信者に電子メールを送信します。 電子メールには、添付ファイルとしてレポートが含まれます。 レポート サーバーは、メール アドレスを検証せず、メール サーバーからアドレスを取得しません。 組織内または外部の有効な電子メール アカウントにレポートを電子メールで送信できます。

> [!NOTE]
> **電子メール**サブスクリプションオプションを有効にするには Reporting Services で電子メールの設定を構成する必要があります。 詳細については、「[Reporting Services の電子メール配信](https://docs.microsoft.com/sql/reporting-services/subscriptions/e-mail-delivery-in-reporting-services)」を参照してください。

次のいずれか、または両方の電子メール配信オプションを選択できます。

- 生成されたレポートへのリンクを含む通知を送信します。

- 埋め込みのレポートまたは添付したレポートの送信。 表示形式とブラウザーによって、レポートが埋め込まれるか、添付されるかが決まります。

  - ブラウザーが HTML 4.0 および MHTML をサポートしていて、**MHTML (Web アーカイブ)** 形式を選択した場合、レポートは電子メールのメッセージの一部として埋め込まれます。
  - 他のすべての形式では、レポートが添付ファイルとして配信されます。
  - Reporting Services は、レポートを送信する前に、添付ファイルまたはメッセージのサイズをチェックしません。 添付ファイルまたはメッセージのサイズが、メール サーバーで許可される上限を超えていると、そのレポートは配信されません。

レポートのサブスクリプションを作成し、電子メールを使用してレポートを配信するには、次の手順に従います。  

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動して、 **[レポート]** を展開し、 **[レポート]** ノードを選択します。

1. レポート フォルダーを選択し、サブスクライブするレポートを選択します。 リボンの **[ホーム]** タブの **[レポート グループ]** セクションで、 **[サブスクリプションの作成]** を選択します。 この操作により、**サブスクリプションの作成ウィザード**が開きます。

1. **[サブスクリプションの配信]** ページで、次の設定を構成します。  

    - **レポートの配信手段**: **[電子メール]** を選択します。

    - **宛先**: 有効な電子メール アドレスを受信者として指定してください。

        > [!NOTE]
        > セミコロン (`;`) で各メール アドレスを区切って、複数の電子メール受信者を入力できます。

    - **Cc**: 必要に応じて、このレポートを CC で受信するメール アドレスを指定します。

    - **Bcc**: 必要に応じて、このレポートを BCC で受信するメール アドレスを指定します。

    - **返信先**: 返信先アドレスを指定します。 受信者がメール メッセージに対して返信すると、このアドレスに返信が送信されます。

    - **[件名]** : サブスクリプション メール メッセージの件名を指定します。

    - **優先順位**: このメール メッセージの優先順位フラグを選択します。 **[低]** 、 **[標準]** 、または **[高]** 。 Microsoft Exchange は、このフラグを使用して、電子メール メッセージの重要度を示します。

    - **コメント**:サブスクリプション メール メッセージの本文のテキストを指定します。

    - **説明**:必要に応じて、このレポートのサブスクリプションに関する追加情報を指定します。

    - **リンクを含める**: このレポートの URL を電子メール メッセージの本文に含めます。

    - **レポートを含める**: レポートを電子メール メッセージに添付します。 **表示形式**オプションを使用して、添付するレポート形式を指定します。

    - **表示形式**: 添付するレポート ファイルの形式を、次のいずれかから選択します。

      - **レポート データを含む XML ファイル**
      - **CSV (コンマ区切り)**
      - **TIFF ファイル**
      - **Acrobat (PDF) ファイル**
      - **MHTML (Web アーカイブ)**
      - **Excel**
      - **Word**

1. **[サブスクリプションのスケジュール]** ページで、レポートのサブスクリプションに次のいずれかの配信スケジュール オプションを選択します。

    - **共有スケジュールを使用する**: 共有スケジュールは以前に定義されたスケジュールで、他のレポートのサブスクリプションで使用することができます。 このオプションを選択した場合は、共有スケジュールも選択します。 共有スケジュールがない場合は、新しいスケジュールを作成するオプションを選択します。

    - **新しいスケジュールを作成する**: このレポートを実行するスケジュールを構成します。 スケジュールには、このサブスクリプションの間隔、開始日時、および終了日が含まれます。 既定では、新しいサブスクリプションは、現在の日付と時刻から 1 時間ごとに実行する新しいスケジュールを作成します。

1. **[サブスクリプションのパラメーター]** ページで、無人で実行するときに必要なこのレポートのパラメーターがあれば指定します。 レポートにパラメーターがない場合、ウィザードではこのページは表示されません。

1. ウィザードを完了します。

1. Configuration Manager によってレポートのサブスクリプションが正常に作成されたことを確認します。 レポートのサブスクリプションを表示および変更するには、 **[サブスクリプション]** ノードを選択します。
