---
title: メンテナンス タスク
titleSuffix: Configuration Manager
description: Configuration Manager のサイトおよび階層に対して実行するメンテナンス タスクと実行のタイミングについて説明します。
ms.date: 07/26/2019
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 625bb787-6d16-47a0-8b0f-b129cd909ca3
author: mestew
ms.author: mstewart
manager: dougeby
ms.openlocfilehash: e0a71fc2f09e967944adfc4266e25eb20acfb9fe
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/21/2020
ms.locfileid: "81694440"
---
# <a name="maintenance-tasks-for-configuration-manager"></a>Configuration Manager のメンテナンス タスク

*適用対象:Configuration Manager (Current Branch)*

Configuration Manager のサイトと階層で、サービスを効率よく継続して利用できるようにするには、定期的なメンテナンスと監視が必要です。 定期的なメンテナンスにより、ハードウェア、ソフトウェア、および Configuration Manager データベースを継続して正しく効率的に機能させることができます。 パフォーマンスを最適にすると、エラーのリスクが大きく減少します。  

 アラートを設定し、さらにステータス システムを使用して Configuration Manager のステータス システムの正常性を監視するには、「[Configuration Manager のアラートとステータス システムの使用](../../../core/servers/manage/use-alerts-and-the-status-system.md)」を参照してください。  

## <a name="maintenance-tasks"></a><a name="bkmk_MTs"></a> メンテナンス タスク

 サイトが適切に動作するには、定期的なメンテナンスが重要です。 メンテナンス ログとして、メンテナンスの日付、実行者、およびタスクのメンテナンスに関連するコメントを記録するようにしてください。 サイトのメンテナンスを行うには、毎日または毎週のメンテナンスを検討します。 一部のタスクでは、別のスケジュールを必要とする場合があります。 一般的なメンテナンスには、組み込みのメンテナンス タスク、およびその他のタスク (会社のポリシーへのコンプライアンス対応を維持するためのアカウント メンテナンスなど) が含まれます。  

 次の情報をガイドとして使用し、各種のメンテナンス タスクを実行するタイミングを計画します。 これらの一覧を出発点として使用し、必要なタスクを追加します。  

### <a name="daily-tasks"></a>毎日行うタスク
毎日のスケジュールで実行することを検討できるメンテナンス タスクを次に示します。  

- 毎日実行するようにスケジュールされた事前定義のメンテナンス タスクが、正常に実行されていることを確認します。  

- Configuration Manager データベースのステータスを確認します。  

- サイト サーバーのステータスを確認します。  

- Configuration Manager サイト システムの受信トレイにファイル バックログがないか確認します。  

- サイト システムのステータスを確認します。  

- サイト システムに記録されたオペレーティング システムのイベント ログを確認します。  

- サイト データベース コンピューターの SQL Server のエラー ログを確認します。  

- システムのパフォーマンスを確認します。  

- Configuration Manager のアラートを確認します。  

### <a name="weekly-tasks"></a>毎週行うタスク

毎週のスケジュールで実行することを検討できるメンテナンス タスクを次に示します。  

- 毎週実行するようにスケジュールされた事前定義のメンテナンス タスクが、正常に実行されていることを確認します。  

- サイト システムから不要なファイルを削除する。  

- 必要に応じてエンドユーザー レポートを作成および配布する。  

- アプリケーション、セキュリティおよびシステム イベント ログのバックアップを取って消去する。  

- サイト データベースのサイズをチェックし、サイト データベースの拡張に十分なディスク空き容量がサイト データベース サーバーにあることを確認する。  

- SQL Server のメンテナンス プランに従い、サイト データベースで SQL Server データベースのメンテナンスを実行する。  

- すべてのサイト システムの空きディスク容量を確認する。  

- すべてのサイト システムでディスク最適化ツールを実行する。  

### <a name="periodic-tasks"></a>定期的なタスク

毎日または毎週のメンテナンスを必要としない一部のタスクは、サイト全体の正常性を確保するために重要です。 これらのタスクは、セキュリティおよびディザスター リカバリー計画が最新であることも確認します。 毎日または毎週行うタスクより長い定期的なスケジュールを検討できるメンテナンス タスクを次に示します。  

- セキュリティ プランに従い、アカウントおよびパスワードを必要に応じて変更します。  

- メンテナンス計画を見直し、構成したサイト設定に従って、スケジュールしたメンテナンス タスクが適切かつ効果的にスケジュールされていることを確認します。  

- Configuration Manager 階層設計の変更の必要性を検討します。  

- ネットワーク パフォーマンスを確認し、サイトの動作に影響する変更が確実に加えられていないようにします。  

- サイトの動作に影響する Active Directory 設定が変更されていないことを確認します。 たとえば、Configuration Manager サイトの境界として使用する Active Directory サイトに割り当てられているサブネットが変更されていないことを確認します。  

- ディザスター リカバリー計画を変更する必要性を検討します。  

- サイト サーバーのバックアップ メンテナンス タスクによって作成された最新のバックアップのバックアップ コピーを使用し、ディザスター リカバリー計画に従ってテスト ラボでサイト回復を実行します。

- ハードウェアのエラー、または使用可能なハードウェア更新を確認します。  

- サイトの全体的な正常性を確認します。  

## <a name="maintain-the-operational-health-of-your-site-database"></a><a name="BKMK_UseMTs"></a> サイト データベースの動作の正常性を維持する

 スケジュールして設定したタスクが Configuration Manager サイトおよび階層で実行されるたびに、サイト コンポーネントによって Configuration Manager データベースにデータが絶えず追加されます。 データ量が増加するに従って、データベースのパフォーマンスが低下し、データベース内の空き領域が減少します。 必要なくなった古いデータを削除するようにサイト メンテナンス タスクを設定できます。  

 Configuration Manager では、Configuration Manager データベースの正常性を維持するために使用できる定義済みのメンテナンス タスクが用意されています。 既定で、各サイトですべてのメンテナンス タスクを使用できるとは限りません。 有効にされているタスクとされていないタスクがあり、タスクは設定可能なスケジュールをすべてサポートします。  

 ほとんどのメンテナンス タスクは、古くなったデータを Configuration Manager データベースから定期的に削除します。 不要なデータを削除してデータベースのサイズを小さくすると、データベースのパフォーマンスと整合性が向上し、サイトおよび階層の効率も向上します。 **インデックスの再構築**などのその他のタスクは、データベースの効率性を維持するために役立ちます。 **サイト サーバーのバックアップ** タスクなどのその他のタスクは、ディザスター リカバリーの準備に役立ちます。  

> [!IMPORTANT]
> データを削除するタスクのスケジュールを計画する場合は、階層全体でのそのデータの使用方法を考慮してください。 データを削除するタスクがサイトで実行されると、その情報は Configuration Manager データベースから削除され、この変更が階層内のすべてのサイトにレプリケートされます。 この削除は、そのデータに依存するその他のタスクに影響する場合があります。 たとえば、中央管理サイトで、探索を 1 か月あたり 1 回実行するように設定して、クライアント以外のコンピューターを特定できます。 探索の 2 週間以内に、これらのコンピューターに Configuration Manager クライアントをインストールするように計画します。 ただし、階層の 1 つのサイトで、管理者は、期限切れの探索データの削除タスクを 7 日ごとに実行するように設定します。 その結果として、クライアント以外のコンピューターの検出の 7 日後に、それらが Configuration Manager データベースから削除されます。 中央管理サイトでは、これらの新しいコンピューターに対して Configuration Manager クライアントを 10 日後にプッシュ インストールするように準備しています。 しかし、期限切れの探索データの削除タスクが最近実行され、7 日以上経過しているデータが削除されたため、最近発見されたコンピューターはデータベース内に存在しなくなっています。

Configuration Manager サイトをインストールしたら、利用可能なメンテナンス タスクを確認し、操作に必要なタスクを有効にします。 各タスクの既定のスケジュールを確認し、必要な場合は、メンテナンス タスクを微調整し、階層および環境に適合するようにスケジュールを設定します。 各タスクの既定のスケジュールはほとんどの環境に適合しますが、サイトおよびデータベースのパフォーマンスを監視して、展開の効率性が向上するようにタスクを微調整することを考慮してください。 サイトおよびデータベースのパフォーマンスを定期的に確認して、メンテナンス タスクおよびそのスケジュールの効率性が維持されるように再構成することを計画します。  

## <a name="set-up-maintenance-tasks"></a>メンテナンス タスクの設定

 各 Configuration Manager サイトは、サイト データベースの運用効率を維持するためのメンテナンス タスクをサポートします。 既定では、各サイトでいくつかのメンテナンス タスクが有効に設定され、タスクはすべて個別のスケジュールをサポートします。 メンテナンス タスクは、サイトごとに個別に設定し、そのサイトのデータベースに適用されます。 ただし、**期限切れの探索データの削除**などの一部のタスクは、ある階層のすべてのサイトで使用できる情報に影響します。  

 サイトで設定可能なメンテナンス タスクのみが Configuration Manager コンソールに表示されます。 サイトの種類別のメンテナンス タスクの完全な一覧については、「[Configuration Manager のメンテナンス タスクのリファレンス](../../../core/servers/manage/reference-for-maintenance-tasks.md)」を参照してください。  

 メンテナンス タスクの一般的な設定を行う際に、次のトピックを参考にしてください。  

### <a name="to-set-up-maintenance-tasks-for-configuration-manager-version-1906"></a><a name="bkmk_MTs1906"></a>Configuration Manager バージョン 1906 のメンテナンス タスクを設定する場合
<!--3555894-->
バージョン 1906 以降では、サイト サーバーのメンテナンス タスクを、サイト サーバーの詳細ビューでそれぞれのタブから表示、編集、監視できるようになりました。 以前のバージョンの Configuration Manager と同様、 **[設定]** グループで **[サイトのメンテナンス]** を選択して、メンテナンス タスクを編集することもできます。

1. Configuration Manager コンソールで、 **[管理]**  >  **[サイトの構成]**  > **[サイト]** の順に移動します。
1. 一覧からサイトを選択し、詳細ウィンドウで **[メンテナンス タスク]** タブをクリックします。
1. 選択したサイトで利用可能なタスクのみが表示されます。 メンテナンス タスクの 1 つを右クリックし、次のオプションの 1 つを選択します。
   - **[有効にする]** - タスクをオンにします。
   - **[無効にする]** - タスクをオフにします。
   - **[編集]** - タスク スケジュールまたはそのプロパティを編集します。

![サイト サーバーの詳細ビューのメンテナンス タスク用タブ](./media/3555894-maintenance-tasks.png)

**[メンテナンス タスク]** タブには、次のような情報が表示されます。

- タスクが有効になっているかどうか
- タスク スケジュール
- 最後の開始時刻
- 最後の完了時間
- タスクが正常に完了したかどうか
 
### <a name="to-set-up-maintenance-tasks-for-configuration-manager-version-1902-and-prior"></a>Configuration Manager バージョン 1902 以前のメンテナンス タスクを設定する場合

1. Configuration Manager コンソールで、 **[管理]**  >  **[サイトの構成]**  > **[サイト]** の順に移動します。
2. 設定するメンテナンス タスクがあるサイトを選択します。  
3. **[ホーム]** タブの **[設定]** グループで、 **[サイトのメンテナンス]** をクリックして設定するメンテナンス タスクを選択します。 選択したサイトで利用可能なタスクのみが表示されます。

4. タスクを設定するには、 **[編集]** を選択します。 **[このタスクを有効にする]** チェック ボックスを確実にオンにし、タスクの実行スケジュールを設定します。 このタスクで期限切れのデータも削除する場合は、タスク実行時にデータベースから削除するデータの期限も設定します。 **[OK]** をクリックしてタスクの **[プロパティ]** を閉じます。

   > [!NOTE]  
   > **[期限切れのステータス メッセージの削除]** では、ステータス フィルター規則の設定時に削除するデータの期限を設定します。  

5. タスクのプロパティを編集せずにタスクを有効または無効にする場合は、 **[有効にする]** または **[無効にする]** ボタンをクリックします。 現在のタスクの構成に応じてボタンのラベルが変更されます。  
6. メンテナンス タスクの構成が完了したら、 **[OK]** を選択して手順を完了します。

## <a name="next-steps"></a>次のステップ

[メンテナンス タスクのリファレンス](reference-for-maintenance-tasks.md)
