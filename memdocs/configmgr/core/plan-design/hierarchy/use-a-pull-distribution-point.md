---
title: プル配布ポイント
titleSuffix: Configuration Manager
description: Configuration Manager でのプル配布ポイントの使用に関する構成と制限事項について説明します。
ms.date: 04/24/2020
ms.prod: configuration-manager
ms.technology: configmgr-core
ms.topic: conceptual
ms.assetid: 7d8f530b-1a39-4a9d-a2f0-675b516da7e4
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: c243897a4c52eff04263325b998c4b23d6b3dde4
ms.sourcegitcommit: ad4b3e4874a797b755e774ff84429b5623f17c5c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/27/2020
ms.locfileid: "82166589"
---
# <a name="use-a-pull-distribution-point-with-configuration-manager"></a>Configuration Manager でのプル配布ポイントの使用

*適用対象:Configuration Manager (Current Branch)*

Configuration Manager コンソールで標準配布ポイントにコンテンツを配布する場合、サイト サーバーによって配布ポイントにコンテンツがプッシュされます。 プル配布ポイントは、クライアントなどのソースの場所からダウンロードすることでコンテンツを取得します。  

多数の配布ポイントにコンテンツを配布するときに、プル配布ポイントを使用するとサイト サーバーの処理負荷を軽減できます。 各サーバーへのコンテンツ転送の速度を上げることもできます。 通常、サイト サーバー上の配布マネージャー コンポーネントは、各配布ポイントにコンテンツを送信します。 代わりに、サイトはプル配布ポイントにコンテンツを転送するプロセスをオフロードします。  

配布ポイントは個別にプル配布ポイントとして構成することができます。 それぞれのプル配布ポイントに対して、それがコンテンツを取得するソース配布ポイントを 1 つまたは複数指定します。 プル配布ポイントは、ソース配布ポイントとして指定する配布ポイントからのみコンテンツをダウンロードできます。

コンソールのプル配布ポイントにコンテンツを配布する場合、サイト サーバーによって通知が送信されます。 プル配布ポイントでは、ソース配布ポイントからコンテンツがダウンロードされます。 プル配布ポイントは、既にコンテンツのコピーを持っている配布ポイントからダウンロードすることで、コンテンツの転送を管理します。  

プル配布ポイントは、通常配布ポイントと同じ構成と機能をサポートします。 たとえば、プル配布ポイントでは以下がサポートされます。

- マルチキャストと PXE の構成
- コンテンツの検証
- オンデマンドのコンテンツ配布
- クライアントからの HTTP または HTTPS 通信
- 他の配布ポイントと同じ証明書オプション
- 個別管理または配布ポイント グループのメンバーとしての管理  

配布ポイントをインストールするときに、プル配布ポイントを構成します。 配布ポイントを作成したら、役割のプロパティを編集することでプル配布ポイントとして構成します。 配布ポイントをプル配布ポイントとして有効にする方法について詳しくは、[プル配布ポイント](../../servers/deploy/configure/install-and-configure-distribution-points.md#bkmk_config-pull)に関する記事をご覧ください。  

プル配布ポイントの構成は、配布ポイントのプロパティを編集することで削除します。 プル配布ポイントとしての構成を削除すると、通常の動作に戻ります。 配布ポイントへの今後のコンテンツ転送はサイト サーバーによって管理されます。  

## <a name="distribution-process"></a>配布プロセス

コンテンツをプル配布ポイントに配布するときは、次の処理が順番に行われます。

- コンソールでプル配布ポイントへのコンテンツを配布すると、サイト サーバーの Package Transfer Manager コンポーネントがサイト データベースを調べ、該当するコンテンツがソース配布ポイントにあるかどうかを確認します。 ソース配布ポイントにコンテンツがあるかどうかを確認できない場合は、その後 20 分おきに確認を繰り返します。  

- Package Transfer Manager が、ソース配付ポイントにコンテンツがあることを確認できたら、プル配布ポイントにコンテンツをダウンロードするように指示します。 この通知が失敗した場合、プル配布ポイントのソフトウェア配布コンポーネント**再試行設定**に基づいて再試行されます。 プル配布ポイントは、この通知を受信すると、ソース配布ポイントからコンテンツのダウンロードを試みます。  

- プル配布ポイントによってコンテンツがダウンロードされている間、Package Transfer Manager によって、プル配布ポイントのソフトウェア配布コンポーネント **ステータス ポーリング設定**に基づいてステータスに関するポーリングが行われます。  プル配布ポイントは、コンテンツのダウンロードを完了すると、そのステータスを管理ポイントに送信します。  

## <a name="configure-site-component-settings"></a>サイト コンポーネント設定の構成

プル配布ポイントを使用する場合は、次のサイト コンポーネント設定を確認し、構成します。  

1. Configuration Manager コンソールで、 **[管理]** ワークスペースに移動し、 **[サイトの構成]** を展開して **[サイト]** ノードを選択します。  

2. サイトを選択します。 リボンの **[サイト コンポーネントの構成]** を選択し、 **[ソフトウェアの配布]** を選択します。  

3. **[プル配布ポイント]** タブに切り替えます。  

4. **[再試行の設定]** グループで、次の値を確認します。  

    - **[再試行回数]** :Package Transfer Manager がプル配布ポイントにコンテンツ ダウンロードの開始を求める通知を試行する回数。 この回数だけ試行した後、Package Transfer Manager は転送をキャンセルします。 既定値は 30 です。  

    - **[再試行までの待機時間 (分)]** :Package Transfer Manager が次の試行まで待機する分数。 既定値は 20 です。  

5. **[ステータス ポーリング設定]** グループで、次の値を確認します。  

    - **[ポーリングの回数]** :Package Transfer Manager がプル配布ポイントに接触し、ジョブ ステータスを取得する回数。 ジョブが完了する前にこの回数試行した場合、Package Transfer Manager は転送をキャンセルします。 既定値は 72 です。

    - **[再試行までの待機時間 (分)]** :Package Transfer Manager が次の試行まで待機する分数。 既定値は 60 です。

    > [!NOTE]  
    >  ポーリングの再試行回数を超過したために Package Transfer Manager がジョブをキャンセルした場合、プル配布ポイントはコンテンツのダウンロードを続けます。 完了すると、プル配布ポイントは適切なステータス メッセージを送信し、コンソールは新しいステータスを反映します。  

## <a name="limitations"></a>制限事項

- クラウド配布ポイントをプル配布ポイントとして構成することはできません。  

- サイト サーバーの配布ポイントの役割は、プル配布ポイントとして構成できません。  

- 事前設定コンテンツの構成は、プル配布ポイントの構成をオーバーライドします。 プル配布ポイントで **[事前設定されたコンテンツ用にこの配布ポイントを有効にする]** オプションをオンにした場合、コンテンツを待機します。 ソース配布ポイントからコンテンツはプルされません。 事前設定されたコンテンツに対して有効になっている標準配布ポイントと同様に、サイト サーバーからコンテンツを受け取りません。 詳細については、「[事前設定されたコンテンツ](manage-network-bandwidth.md#BKMK_PrestagingContent)」を参照してください。  

- プル配布ポイントでは、スケジュールやレート制限の構成が使用されません。 事前にインストールされた配布ポイントをプル配布ポイントに構成する場合、スケジュールと転送率の制限の構成は保存されますが、使用されません。 後でプル配布ポイント構成を削除した場合は、前と同じスケジュールと転送率の制限が使われるようになります。  

    > [!NOTE]  
    >  **[スケジュール]** タブと **[転送率の制限]** タブは、配布ポイントのプロパティでは表示されません。  

- プル配布ポイントでは、各サイトの **[ソフトウェア配布コンポーネントのプロパティ]** の **[全般]** タブの設定は使用されません。 これらの設定には、**同時配布**設定と**マルチキャストの再試行**設定は含まれません。  

- リモート フォレストにあるソース配布ポイントからコンテンツを転送するには、プル配布ポイントに Configuration Manager クライアントをインストールします。 ソース配布ポイントへのアクセスに使用できるネットワーク アクセス アカウントも構成します。 **[HTTP サイト システムには Configuration Manager によって生成された証明書を使用する]** のサイト オプションを有効にする場合、ネットワーク アクセス アカウントは必要ありません。<!--1358228-->  

- プル配布ポイントが Configuration Manager クライアントでもある場合、クライアントのバージョンは、プル配布ポイントをインストールする Configuration Manager サイトと同じでなければなりません。 プル配布ポイントは、プル配布ポイントと Configuration Manager クライアントの両方に共通する CCMFramework を使用します。  

## <a name="about-source-distribution-points"></a>ソース配布ポイントについて  

プル配布ポイントを構成するときは、ソース配布ポイントを 1 つまたは複数指定します。  

- ウィザードには、ソース配布ポイントになることができる配布ポイントだけが表示されます。  

- プル配布ポイントは、他のプル配布ポイントのソース配布ポイントとして指定できます。  

- Configuration Manager コンソールを使用するときにソース配布ポイントとして指定できるのは、HTTP をサポートする配布ポイントだけです。  

- Configuration Manager SDK を使用して、HTTPS 用に構成されているソース配布ポイントを指定します。 HTTPS 用に構成されているソース配布ポイントを使用するには、プル配布ポイントに Configuration Manager クライアントをインストールします。  

- リモート オフィスでより良好なインターネット接続を確保したい場合、あるいは WAN リンクへの負荷を減らすために、Microsoft Azure でソースとして[クラウド配布ポイント](use-a-cloud-based-distribution-point.md)を使用します。 プル配布ポイントは、Microsoft Azure と通信するためにインターネットにアクセスする必要があります。 コンテンツは、ソース クラウドの配布ポイントに配布する必要があります。<!--1321554-->  

    > [!Note]  
    > この機能では、データ ストレージおよびネットワーク送信の Azure サブスクリプションへの課金が発生します。 詳細については、[クラウド配布ポイントの使用のコスト](use-a-cloud-based-distribution-point.md#bkmk_cost)に関するページを参照してください。  

> [!Tip]  
> プル配布ポイントがソース配布ポイントからコンテンツをダウンロードすると、そのプル配布ポイントは、 **[配布ポイントの使用状況の概要]** レポートの **[アクセスしたクライアント数 (固有)]** 列でクライアントとしてカウントされます。  

### <a name="source-priorities"></a>ソースの優先順位

- 各ソース配布ポイントに別の優先順位を割り当てるか、複数のソース配布ポイントを同じ優先順位に割り当てます。  

- 優先順位によって、プル配布ポイントがソース配布ポイントのコンテンツを要求する順序が決まります。  

- プル配布ポイントは、まず優先順位が最も低いソース配布ポイントに接続します。 同じ優先順位のソース配布ポイントが複数ある場合、プル配布ポイントはその優先順位のソースのいずれかをランダムに選択します。  

- 選択されたソースでコンテンツが使用可能でない場合、プル配布ポイントは優先順位が同じ別の配布ポイントからコンテンツのダウンロードを試みます。  

- 指定された優先順位の配布ポイントのいずれにもコンテンツがない場合、プル配布ポイントは、次の優先順位レベルのソース配布ポイントからコンテンツのダウンロードを試みます。 コンテンツが見つかるまで、この検索が続けられます。

- 割り当てられたソース配布ポイントのいずれにもコンテンツがない場合、プル配布ポイントは 30 分間待機してから処理を再開します。  

## <a name="inside-the-pull-distribution-point"></a>プル配布ポイントの内部

- コンテンツの転送を管理するために、プル配布ポイントは、**CCMFramework** コンポーネントを使用します。 Configuration Manager クライアントにはこのコンポーネントが含まれています。  

- プル配布ポイントを有効にすると、サイトでは **pulldp.msi** がインストールされます。 このインストーラーによって、CCMFramework コンポーネントも追加されます。 フレームワークは、Configuration Manager クライアントを必要としません。  

- プル配布ポイントのインストール後、機能するために主に **CCMExec** サービスが使用されます。  

- プル配布ポイントでは、コンテンツを転送するときに、Windows に組み込まれた**バックグラウンド インテリジェント転送サービス** (BITS) が使用されます。 プル配布ポイントでは、IIS サーバーの BITS 拡張機能をインストールする必要はありません。<!--sms.503672 -Clarified BITS use-->

- 運用の詳細については、プル配布ポイントで次のログ ファイルをご覧ください。  

  - **DataTransferService.log**
  - **PullDP.log**

> [!TIP]
> プル配布ポイントを追加した後、ログ ファイルに HTTP 403 エラーが記録される場合は、次の変更を加えます。
>
> 1. ソース配布ポイントで、`HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL, ClientAuthTrustMode = 2 (REG_DWORD)` のレジストリ値を設定します。
> 1. ソース配布ポイント サーバーを再起動します。
>
> プル配布ポイントでは、ソースからコンテンツのダウンロードが開始されます。 このレジストリ キーの詳細については、「[TLS SSL (Schannel SSP) の概要](https://docs.microsoft.com/windows-server/security/tls/what-s-new-in-tls-ssl-schannel-ssp-overview)」を参照してください。<!-- SCCMDocs#1973 -->

## <a name="see-also"></a>関連項目  

[コンテンツ管理の基本的な概念](fundamental-concepts-for-content-management.md)
