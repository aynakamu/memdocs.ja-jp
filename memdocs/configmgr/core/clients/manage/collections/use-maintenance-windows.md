---
title: メンテナンス期間を使用する
titleSuffix: Configuration Manager
description: コレクションおよびメンテナンス期間を使用して、Configuration Manager でクライアントを効果的に管理します。
ms.date: 06/03/2020
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: 4564ebcb-41a8-4eb0-afdb-2e1f0795cfa2
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 884adddf8eb469bb0b21c48d239d48b04a530f44
ms.sourcegitcommit: 8fc1704ed0e1141f46662bdd32b52bec00fb93b4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/09/2020
ms.locfileid: "89607957"
---
# <a name="how-to-use-maintenance-windows-in-configuration-manager"></a>Configuration Manager のメンテナンス期間の使用方法

*適用対象:Configuration Manager (Current Branch)*

メンテナンス期間を使用して、Configuration Manager により、影響の大きいタスクをいつデバイスで実行できるかを定義します。 メンテナンス期間を使用すると、生産性に影響しない時間帯にクライアントの構成に対する変更を行うことができます。 ユーザーはソフトウェア センターの **[インストールの状態]** タブでデバイスの次回のメンテナンス期間を確認できます。 <!--1358131-->

次のタスクでは、メンテナンス期間がサポートされています。

- アプリケーションとパッケージの展開

- ソフトウェア更新プログラムの展開

- コンプライアンス設定の展開と評価

- OS とカスタム タスク シーケンスの展開

有効な日付、開始時刻、終了時刻、繰り返しパターンにより、メンテナンス期間を構成します。 期間の最長時間は、24 時間未満にする必要があります。 コンソールでは、24 時間を超える単一のメンテナンス期間は許可されません。 たとえば、土曜日と日曜日に 1 日中メンテナンスを許可したい場合は、それぞれに対して 24 時間のメンテナンス期間を作成します。<!-- MEMDocs#310 -->

既定では、展開によって実行されるコンピューターの再起動はメンテナンス期間以外では許可されませんが、既定の設定をオーバーライドできます。 メンテナンス期間は、展開が実行される時間にのみ影響を与えます。 ローカルでダウンロードおよび実行されるように構成する展開では、期間外にコンテンツをダウンロードできます。

クライアントが、メンテナンス期間が構成されているデバイス コレクションのメンバーである場合は、許容最長実行時間がその期間の長さを超えない場合にのみ、展開が実行されます。 展開の実行が失敗する場合は、クライアントがアラートを生成します。 そして、利用できる時間がある、スケジュールされた次回のメンテナンス期間に、展開を再実行します。

## <a name="multiple-maintenance-windows"></a>複数のメンテナンス期間

クライアント コンピューターが、メンテナンス期間が構成されている複数のデバイス コレクションのメンバーである場合は、次の規則が適用されます。  

- メンテナンス期間が重複していない場合、クライアントでは 2 つの独立したメンテナンス期間として扱われます。

- メンテナンス期間が重複している場合、クライアントでは、両方の期間全体を含む単一の期間として扱われます。 たとえば、コレクションで 2 つのメンテナンス期間を作成します。 1 番目は 6:00 から 7:00 まで有効で、2 番目は 6:30 から 7:30 まで有効であるとします。 これらは 30 分間重複しているため、結合されたメンテナンス期間の実質的な時間は、6:00 から 7:30 までの 90 分間になります。

ユーザーがソフトウェア センターからアプリケーションをインストールすると、クライアントはそれをすぐに起動します。 管理者よりもユーザーの意図が優先します。

目的が **[必須]** であるアプリケーション展開が、ソフトウェア センターでユーザーが構成した勤務時間外にインストールの期限に達した場合、クライアントではアプリケーションがインストールされます。 ユーザーよりも管理者の意図が優先します。

既定では、複数のメンテナンス期間が構成されている場合、クライアントでは、種類が **[ソフトウェア更新プログラム]** の期間にだけソフトウェア更新プログラムがインストールされます。 **[すべての展開]** メンテナンス期間はすべて無視されます。ただし、それが唯一の種類である場合を除きます。 この動作は、 **[ソフトウェア更新プログラム]** グループの次のクライアント設定で構成できます。 **[ソフトウェアの更新プログラム] メンテナンス期間を利用できる場合に、[すべての展開] メンテナンス期間内のソフトウェア更新プログラムのインストールを有効にします**。 詳細については、「[クライアント設定について](../../deploy/about-client-settings.md#bkmk_SUMMaint)」を参照してください。<!-- SCCMDocs#1317 -->

> [!NOTE]
> この設定は、**タスク シーケンス**に適用するように構成したメンテナンス期間にも適用されます。<!-- SCCMDocs-pr #4596 -->
>
> クライアントで利用できるのが **[すべて展開]** 期間のみである場合も、その期間内にソフトウェア更新プログラムまたはタスク シーケンスがインストールされます。

## <a name="configure-maintenance-windows"></a>メンテナンス期間の構成

1. Configuration Manager コンソールで、 **[資産とコンプライアンス]** ワークスペースに移動します。

1. **[デバイス コレクション]** ノードを選択し、コレクションを選択します。

    > [!NOTE]
    > **[すべてのシステム]** コレクションにメンテナンス期間を作成することはできません。

1. リボンの **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]** を選択します。

1. **[メンテナンス期間]** タブに切り替え、 **[新規]** アイコンを選択します。

    1. コレクションでこのメンテナンス期間を一意に識別するための **[名前]** を指定します。

    1. **[時刻]** 設定を構成します:

        - **[有効日]** :メンテナンス期間が開始する日です。 既定値は現在の日付です。

        - **[開始時刻]** と **[終了時刻]** :メンテナンス期間の開始時刻と終了時刻です。 メンテナンス期間の **[期間]** が計算されます。 最小の期間は 5 分間であり、最大で 24 時間です。 既定の期間は、01:00 から 04:00 までの 3 時間です。

        - **協定世界時 (UTC)** :クライアントで開始時刻と終了時刻が UTC タイム ゾーンの時刻と解釈されるようにするには、このオプションを有効にします。 このオプションを使用すると、同じコレクション内の、地域または世界中に分散したデバイスに対して、メンテナンス期間がコレクションのすべてのデバイス上で同時に始まるように設定されます。 クライアントでデバイスのローカル タイム ゾーンを使用するには、このオプションを無効にします。 既定では、このオプションは無効になっています。

    1. 定期的なパターンを構成します。 既定値は週に一度 (現在の曜日) です。

    1. **このスケジュールの適用対象**:既定では、期間は **[すべての展開]** に適用されます。 **[ソフトウェア更新プログラム]** または **[タスク シーケンス]** を選択して、この期間中にどの展開を実行するかをさらに制御できます。

        > [!TIP]
        > 同じコレクションで異なる種類の複数のメンテナンス期間を構成する場合、クライアントの動作を理解しておく必要があります。 詳細については、「[複数のメンテナンス期間](#multiple-maintenance-windows)」を参照してください。

1. **[OK]** を選択して保存し、ウィンドウを閉じます。

コレクション プロパティの **[メンテナンス期間]** タブには、すべての構成された期間が表示されます。

## <a name="use-powershell"></a><a name="bkmk_powershell"></a> PowerShell を使用する

PowerShell は、メンテナンス期間を構成するために使用できます。 詳細については、以下の記事を参照してください。

- [Get-CMMaintenanceWindow](/powershell/module/configurationmanager/get-cmmaintenancewindow)
- [New-CMMaintenanceWindow](/powershell/module/configurationmanager/new-cmmaintenancewindow)
- [Remove-CMMaintenanceWindow](/powershell/module/configurationmanager/remove-cmmaintenancewindow)
- [Set-CMMaintenanceWindow](/powershell/module/configurationmanager/set-cmmaintenancewindow)