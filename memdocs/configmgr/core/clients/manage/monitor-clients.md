---
title: クライアントの監視
titleSuffix: Configuration Manager
description: Configuration Manager でクライアントを監視する方法の詳細なガイダンスです
ms.date: 09/15/2020
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: 2c8f57cf-1968-48de-87fb-4897432ed6e0
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 8094db944a1430311f0c3bb8c94bc7043b12c5ae
ms.sourcegitcommit: cba06c182646cb6dceef304b35230bf728d5133e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/15/2020
ms.locfileid: "90574620"
---
# <a name="how-to-monitor-clients-in-configuration-manager"></a>Configuration Manager でクライアントを監視する方法

*適用対象:Configuration Manager (Current Branch)*

サイト内の Windows デバイスに構成マネージャー クライアントをインストールしたら、Configuration Manager コンソールでそれらの正常性とアクティビティを監視しましょう。  


## <a name="about-client-status"></a><a name="bkmk_about"></a> クライアントのステータスについて

Configuration Manager はクライアント ステータスとして次の種類の情報を提供します。  

- **[Client online status]\(クライアントのオンライン状態\)** :デバイスがその割り当てられている管理ポイントに接続されていた場合、それはサイトによって**オンライン**であると見なされます。 クライアントがオンラインであることを示すには、ping のようにメッセージを管理ポイントに送信します。 5 分以内に管理ポイントにメッセージが届かない場合、そのクライアントはサイトにより**オフライン**であると見なされます。  

- **[クライアント アクティビティ]** :過去 7 日以内にクライアントが Configuration Manager と通信を行っていた場合、それはサイトにより**アクティブ**であると見なされます。 7 日以内にクライアントが以下のアクションを実行していなかった場合、それはサイトにより**非アクティブ**であると見なされます。  

    - ポリシーの更新を要求した  
    - ハートビート メッセージを送信した  
    - ハードウェア インベントリを送信した  

- **[クライアント チェック]** :デバイス上で構成マネージャー クライアントにより実行される定期評価の状態です。 この評価ではデバイスがチェックされ、検出された問題の一部が修復されます。 詳細については、「[Client health checks (クライアントの正常性チェック)](#BKMK_ClientHealth)」をご覧ください。  

     Windows 7 を稼働しているデバイスでは、クライアント チェックはスケジュールされたタスクとして実行されます。 以降のバージョンの OS では、クライアント チェックは Windows のメンテナンス期間中に自動的に実行されます。  

     ビジネスにとって重要なサーバーなど、特定のデバイスに対しては実行されないよう修復を構成することができます。 評価したい追加項目がある場合は、Configuration Manager のコンプライアンス設定を使って追加の構成を監視します。 コンプライアンス設定の詳細については、[コンプライアンス設定の計画と構成](../../../compliance/plan-design/plan-for-and-configure-compliance-settings.md)に関するページをご覧ください。  

- **[使用停止]** :サイトにより、デバイス レコードが削除対象としてマークされました。 この動作が発生するのは、同じデバイスの新しい登録が、階層内の同じまたは異なるプライマリ サイトに割り当てられた場合です。 サイトのメンテナンス タスク **[期限切れの探索データの削除]** が次に実行されたときに、サイトによってこれらのデバイスが削除されます。<!-- SCCMDocs issue #1418 -->  

- **[現在不使用]** :サイトによって同じハードウェア ID を持つ新しいデバイス レコードが検出されたため、古いレコードが現在不使用としてマークされました。 レポートにより、同じデバイスの不使用のレコードが複数回カウントされることはありません。 ただし、ポリシーの対象を不使用のデバイスにすることはできます。 非アクティブの状態が 90 日間続いた後に不使用のレコードのハートビートがサイトに届かなかった場合、サイトのメンテナンス タスク **[不使用のクライアントの探索データの削除]** が実行されたときにその不使用のデバイスは削除されます。


## <a name="monitor-individual-clients"></a><a name="bkmk_indStatus"></a> 個々のクライアントの監視

1. Configuration Manager コンソールで、 **[資産とコンプライアンス]** ワークスペースに移動します。 いずれかの **[デバイス]** ノードを選択するか、 **[デバイス コレクション]** の下でコレクションを選択します。  

    各行の先頭にあるアイコンは、デバイスのオンライン状態を示しています。  

    | アイコン | 説明 |
    | ---- | ----------- |  
    |![クライアントのオンライン状態アイコン](../../../core/clients/manage/media/online-status-icon.png)|デバイスはオンラインです|  
    |![クライアントのオフライン状態アイコン](../../../core/clients/manage/media/offline-status-icon.png)|デバイスはオフラインです|  
    |![クライアントの不明な状態アイコン](../../../core/clients/manage/media/unknown-status-icon.png)|オンライン状態は不明です|  
    |![クライアントがインストールされていない](../../../core/clients/manage/media/client-not-installed.png)|デバイスにクライアントがインストールされていません|  

2. 詳細なオンライン状態を表示するには、クライアントのオンライン状態情報をデバイス ビューに追加します。 列ヘッダーを右クリックして、追加するオンライン状態のフィールドを選択します。

    - **[デバイスのオンライン状態]** :クライアントが現在オンラインとオフラインのどちらであるかを示します。 (この状態は、アイコンが示す情報と同じです。)  

    - **[最終オンライン時刻]** :クライアントのオンライン状態がオンラインに変わった時刻を示します  

    - **[最終オフライン時刻]** は、状態がオフラインに変わった時刻を示します  

3. リスト ウィンドウから個々のクライアントを選択して、詳細ウィンドウでより詳しい状態を確認します。 この情報には、クライアントのアクティビティとクライアント チェックの状態が含まれています。  


## <a name="client-health-dashboard"></a><a name="bkmk_health"></a> クライアントの正常性ダッシュボード

<!--3599209-->
ご利用の環境を保護するのに役立つ、ソフトウェア更新プログラムとその他のアプリをデプロイします。しかし、これらのデプロイで到達できるのは正常なクライアントのみです。 異常な Configuration Manager クライアントは、全体的なコンプライアンスに悪影響を及ぼします。 管理のスコープに含める必要があるデバイスの合計数など、分母によっては、クライアントの正常性の判断が困難な場合があります。 たとえば、Active Directory からすべてのシステムを検出した場合、それらのレコードの一部が使用を中止したコンピューターに対するものであっても、このプロセスによって分母が増加します。

Configuration Manager には、環境内のクライアントの正常性に関する情報が表示されるダッシュボードが用意されています。 クライアントの正常性、シナリオのヘルス、および一般的なエラーを表示します。 ビューをいくつかの属性でフィルター処理し、OS とクライアントのバージョンごとに潜在的な問題を表示します。

Configuration Manager コンソールで、 **[監視]** ワークスペースに移動します。 **[クライアント ステータス]** を展開し、 **[クライアントの正常性ダッシュボード]** ノードを選択します。

:::image type="content" source="media/3599209-client-health-dashboard.png" alt-text="クライアントの正常性ダッシュボードのスクリーンショット" lightbox="media/3599209-client-health-dashboard.png":::

> [!Tip]  
> ccmeval に対する変更はありません。  

既定では、クライアントの正常性ダッシュボードにはオンライン クライアントと過去 3 日間でアクティブだったクライアントが表示されます。 そのため、このダッシュボードには、クライアントの正常性の他の履歴ソースとは異なる数字が表示されることがあります。 たとえば、 **[クライアントのステータス]** の下にある他のノードや、クライアントのステータス カテゴリにあるレポートです。

### <a name="filters"></a>フィルター

ダッシュボードの上部には、ダッシュボードに表示されるデータを調整するための一連のフィルターがあります。

- **次のコレクション内のクライアントに関するクライアント ヘルス**:既定では、 **[すべてのシステム]** コレクションのデバイスがダッシュボードに表示されます。 デバイス コレクションを選択し、特定のコレクションのデバイスのサブセットにビューのスコープを設定します。  

- **過去数日間でアクティブだったクライアント**:既定では、ダッシュボードに、過去 3 日間のアクティブな状態のクライアントが表示されます。  

- **オフラインのクライアントのクライアント ヘルスを含める**:既定では、ダッシュボードにオンラインのクライアントのみが表示されます。 この状態は、5 分ごとにクライアントの状態を更新するクライアント通知チャネルから取得されます。 詳細については、「[クライアントのステータスについて](monitor-clients.md#bkmk_about)」を参照してください。  

- **異常なクライアントの詳細のみを表示**:クライアントの正常性のエラーを報告しているデバイスのみにビューのスコープを設定します。  

    > [!Tip]  
    > クライアントのバージョンと OS のバージョンのタイルと共に、このフィルターを使用します。 詳細については、「[バージョンのタイル](#version-tiles)」を参照してください。

### <a name="overall-client-health"></a>全体的なクライアント ヘルス

このタイルには、階層内の全体的なクライアントの正常性が表示されます。

正常な Configuration Manager クライアントには、次のプロパティがあります。

- オンライン  
- [Actively sending data]\(アクティブにデータを送信しています\)  
- [Passes all client health evaluation checks]\(すべてのクライアントの正常性評価チェックに合格しました\)  

詳細については、「[クライアントのステータスについて](monitor-clients.md#bkmk_about)」を参照してください。

正常なクライアントはサイトと正常に通信します。 クライアント設定で定義されているスケジュールに基づいて、すべてのデータを報告します。

デバイス リスト ビューにドリルダウンするには、このグラフのセグメントを選択します。

### <a name="version-tiles"></a>バージョンのタイル

Configuration Manager クライアントのバージョンおよび OS のバージョンごとにクライアントの正常性を表示する 2 つのタイルがあります。 これらのタイルは、**エラーのみ**など、フィルターを変更した場合に役立ちます。 問題が特定のバージョンで一貫性があるかどうかを強調表示するのに役立つ場合があります。 この情報を使用すると、アップグレードを決定するのに役立ちます。

デバイス リスト ビューにドリルダウンするには、これらのグラフのセグメントを選択します。

### <a name="scenario-health"></a>シナリオのヘルス

この棒グラフは、次の主要なシナリオの全体的な正常性を示しています。

- クライアント ポリシー
- 定期探索
- ハードウェア インベントリ
- ソフトウェア インベントリ
- ステータス メッセージ

セレクターを使用して、グラフ内の特定のシナリオに対するフォーカスを調整します。

次の 2 つの棒は常に表示されます。

- **[Combined (All)]\(組み合わせ (すべて)\)** : すべてのシナリオの組み合わせ (AND)  
- **[Combined (Any)]\(組み合わせ (任意)\)** : 少なくとも 1 つのシナリオ (OR)

> [!Tip]  
> シナリオのヘルスは、クライアント設定の構成から測定されません。 これらの値は、デバイスごとのポリシーの結果セットによって異なる場合があります。 シナリオのヘルスの評価期間を調整するには、次の手順を使用します。
>
> - Configuration Manager コンソールで、 **[監視]** ワークスペースに移動して、 **[クライアント ステータス]** ノードを選択します。  
> - リボンで、 **[クライアントのステータスの設定]** を選択します。  
>
> 既定では、クライアントによって **7 日間**、シナリオに固有のデータが送信されていない場合、Configuration Manager ではそのシナリオに対して異常と見なします。

### <a name="top-10-client-health-failures"></a>上位 10 件のクライアントの正常性のエラー

このグラフには、環境内で最も一般的なエラーが一覧表示されます。 これらのエラーは、Windows または Configuration Manager から取得されます。

<!-- The following list includes some of the more common failures overall:

#### Failure 1 title
Failure 1 description

Solution for failure 1 -->


## <a name="monitor-the-status-of-all-clients"></a><a name="bkmk_allStatus"></a> すべてのクライアントのステータスの監視

1. Configuration Manager コンソールで、 **[監視]** ワークスペースに移動して、 **[クライアント ステータス]** ノードを選択します。 サイト全体でのクライアントのアクティビティとクライアント チェックの全体的な統計情報を確認します。 別のコレクションを選択して、情報の範囲を変更します。  

2. 報告された統計情報の詳細にドリルダウンするには、報告された情報の名前を選択します。 たとえば、**クライアント チェックに合格したアクティブなクライアントや、結果なし**です。 次に、個々のクライアントに関する情報を確認します。  

3. **[クライアント アクティビティ]** を選択すると、Configuration Manager サイトのクライアント アクティビティを示すグラフが表示されます。  

4. **[クライアント チェック]** を選択すると、Configuration Manager サイトのクライアント チェックの状態を示すグラフが表示されます。  

    クライアント チェックの結果またはクライアント アクティビティが指定した割合を下回った場合に通知が届くようにアラートを構成します。 サイトによって、指定した割合のクライアント上で修復が失敗したときにアラートを送信させることもできます。 詳細については、「[クライアント ステータスを構成する方法](../deploy/configure-client-status.md)」を参照してください。  


## <a name="client-health-checks"></a><a name="BKMK_ClientHealth"></a> クライアントの正常性チェック

クライアント チェックにより、次のチェックと修復が実行されます。  

|クライアント チェック|修復処理|詳細情報|  
|------------------|------------------------|----------------------|  
|最近クライアント チェックが実行されたかどうかの確認|クライアント チェックの実行|過去 3 日間にクライアント チェックが少なくとも 1 回実行されたことを確認します。|  
|クライアントの前提条件がインストールされているかどうかの確認|クライアントの前提条件のインストール|クライアントの前提条件がインストールされていることを確認します。 クライアント インストール フォルダーのファイル ccmsetup.xml を読み取って、前提条件を検出します。|  
|WMI リポジトリの整合性テスト|Configuration Manager クライアントの再インストール|Configuration Manager クライアント エントリが WMI に存在することを確認します。|  
|クライアント サービスが実行されているかどうかの確認|クライアント (SMS Agent Host) サービスの起動|詳細情報なし|  
|WMI イベント シンクのテスト|クライアント サービスの再起動|Configuration Manager 関連の WMI イベント シンクが失われていないかどうかを確認します。|  
|Windows Management Instrumentation (WMI) サービスが存在するかどうかの確認|修復なし|詳細情報なし|  
|クライアントが正しくインストールされているかどうかの確認|クライアントの再インストール|詳細情報なし|  
|マルウェア対策サービスのスタートアップの種類が自動であるかどうかの確認|サービスのスタートアップの種類の自動へのリセット|詳細情報なし|  
|マルウェア対策サービスが実行されているかどうかの確認|マルウェア対策サービスの起動|詳細情報なし|  
|Windows Update サービスのスタートアップの種類が自動であるか手動であるかの確認|サービスのスタートアップの種類の自動へのリセット|詳細情報なし|  
|クライアント サービス (SMS Agent Host) のスタートアップの種類が自動であるかどうかの確認|サービスのスタートアップの種類の自動へのリセット|詳細情報なし|  
|Windows Management Instrumentation (WMI) サービスが実行されているかどうかの確認|Windows Management Instrumentation サービスの起動|詳細情報なし|  
|Microsoft SQL CE データベースが正常であるかどうかの確認|Configuration Manager クライアントの再インストール|詳細情報なし|  
|Microsoft Policy Platform WMI の整合性テスト|Microsoft Policy Platform の修復|詳細情報なし|  
|Microsoft Policy Platform サービスが存在するかどうかの確認|Microsoft Policy Platform の修復|詳細情報なし|  
|Microsoft Policy Platform サービスのスタートアップの種類が手動であるかどうかの確認|サービスのスタートアップの種類の手動へのリセット|詳細情報なし|  
|バックグラウンド インテリジェント転送サービスが存在するかどうかの確認|修復なし|詳細情報なし|  
|バックグラウンド インテリジェント転送サービスのスタートアップの種類が自動であるか手動であるかの確認|サービスのスタートアップの種類の自動へのリセット|詳細情報なし|  
|ネットワーク検査サービスのスタートアップの種類が手動であるかどうかの確認|サービスのスタートアップの種類の手動へのリセット (インストールされている場合)|詳細情報なし|  
|Windows Management Instrumentation (WMI) サービスのスタートアップの種類が自動であるかどうかの確認|サービスのスタートアップの種類の自動へのリセット|詳細情報なし|  
|Windows 8 デバイス上の Windows Update サービスのスタートアップの種類が自動であるか手動であるかの確認|サービスのスタートアップの種類の手動へのリセット|詳細情報なし|  
|クライアント (SMS Agent Host) サービスが存在するかどうかの確認|修復なし|詳細情報なし|  
|Configuration Manager リモート コントロール サービスのスタートアップの種類が自動であるか手動であるかの確認|サービスのスタートアップの種類の自動へのリセット|詳細情報なし|  
|Configuration Manager リモート コントロール サービスが実行されているかどうかの確認|リモート コントロール サービスの起動|詳細情報なし|  
|ウェイクアップ プロキシ サービス (ConfigMgr Wake-up Proxy) が実行されているかどうかの確認|ConfigMgr Wakeup Proxy サービスの起動|このクライアント チェックが行われるのは、 **[電源管理**:**ウェイクアップ プロキシを有効にする]** のクライアント設定が、サポートされるクライアント オペレーティング システム上で **[はい]** に設定されている場合のみです。|  
|ウェイクアップ プロキシ サービス (ConfigMgr Wake-up Proxy) のスタートアップの種類が自動であるかどうかの確認|ConfigMgr Wakeup Proxy サービスのスタートアップの種類の自動へのリセット|このクライアント チェックが行われるのは、 **[電源管理**:**ウェイクアップ プロキシを有効にする]** のクライアント設定が、サポートされるクライアント オペレーティング システム上で **[はい]** に設定されている場合のみです。|  


<!-- 
5/31/2019 ACz: need to confirm if these checks are still applicable
|WMI repository read and write test|Reset the WMI repository and reinstall the Configuration Manager client|Remediation of this client check is only performed on devices that run Windows Server 2003, Windows XP (64-bit) or earlier versions.|  
|Verify that the client WMI provider is healthy|Restart the Windows Management Instrumentation service|Remediation of this client check is only performed on devices that run Windows Server 2003, Windows XP (64-bit) or earlier.|  
 -->


## <a name="client-deployment-log-files"></a>クライアント展開のログ ファイル

クライアント展開と管理操作によって使われるログ ファイルについて詳しくは、[ログ ファイル](../../plan-design/hierarchy/log-files.md#BKMK_ClientLogs)に関するページをご覧ください。
