---
title: シナリオの例 - Windows Embedded クライアントの展開
titleSuffix: Configuration Manager
description: Windows Embedded デバイスで Configuration Manager クライアントを展開および管理するシナリオ例を参照してください。
ms.date: 04/23/2017
ms.prod: configuration-manager
ms.technology: configmgr-client
ms.topic: conceptual
ms.assetid: 10049c89-b37c-472b-b317-ce4f56cd4be7
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 18e6252a3528e62153e7226ff285d24cd6ecf013
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/21/2020
ms.locfileid: "81693870"
---
# <a name="example-scenario-for-deploying-and-managing-configuration-manager-clients-on-windows-embedded-devices"></a>Windows Embedded デバイスで Configuration Manager クライアントを展開および管理するシナリオ例

*適用対象:Configuration Manager (Current Branch)*

このシナリオでは、Configuration Manager で書き込みフィルター対応 Windows Embedded デバイスを管理する方法について説明します。埋め込みデバイスが書き込みフィルターをサポートしていない場合、標準の Configuration Manager クライアントとして動作し、これらの手順は適用されません。  

大正ワイナリーは、観光案内所のオープンを予定していて、インタラクティブな案内を表示する Windows Embedded キオスクを導入する必要があります。 新しい観光案内所の建物は IT 部門の近くにはないため、キオスクをリモートから管理する必要があります。 案内を表示するソフトウェアに加えて、これらのデバイスでは、企業のセキュリティ ポリシーに準拠するために、最新のマルウェア対策保護ソフトウェアを実行する必要があります。 キオスクは、観光案内所が営業している間、ダウンタイムなしの年中無休で実行する必要があります。  

 大正ワイナリーでは、既に Configuration Manager を実行してネットワーク上のデバイスを管理しています。 Configuration Manager は、Endpoint Protection を実行し、ソフトウェア更新プログラムとアプリケーションをインストールするように構成されています。 ただし、IT 部門はこれまで Windows Embedded デバイスを管理したことはないため、Configuration Manager 管理者は、会社の受付ロビーにある 2 台のキオスクを管理するテストを実行する予定です。   

 書き込みフィルターが有効にされたこれらの Windows Embedded デバイスを管理するために、Configuration Manager 管理者は次の手順に従って、構成マネージャー クライアントをインストールし、Endpoint Protection を使用してクライアントを保護して、インタラクティブな案内ソフトウェアをインストールします。  

1. Configuration Manager 管理者 (管理者) は、Windows Embedded デバイスで書き込みフィルターを使用する方法と、自動的に書き込みフィルターを無効にしてから再度有効にすることで Configuration Manager で簡単にソフトウェアのインストールを保持できる方法について読みます。  

    詳細については、「[Windows Embedded デバイスへのクライアント展開の計画](../../../core/clients/deploy/plan/planning-for-client-deployment-to-windows-embedded-devices.md)」を参照してください。  

2. 管理者は構成マネージャー クライアントをインストールする前に、Windows Embedded デバイス用に新しいクエリ ベースのデバイス コレクションを作成します。 会社ではコンピューターの識別に標準の命名規則を使用しているため、管理者はコンピューター名の最初の 6 文字 (**WEMDVC**) で Windows Embedded デバイスを一意に識別できます。 管理者は、このコレクションを作成するために、**select SMS_R_System.NetbiosName from SMS_R_System where SMS_R_System.NetbiosName like "WEMDVC%"** の WQL クエリを使用します。  

    このコレクションを使用して、管理者は他のデバイスとは異なる構成オプションで Windows Embedded デバイスを管理できます。 管理者は、このコレクションを再起動の制御、Endpoint Protection へのクライアント設定の展開、インタラクティブな案内アプリケーションの展開に使用します。  

    [コレクションの作成方法](../../../core/clients/manage/collections/create-collections.md)に関するページを参照してください。  

3. 管理者はコレクションのメンテナンス期間を構成して、案内アプリケーションとアップグレードのインストールに必要な再起動が観光案内所の営業時間中に発生しないようにします。 営業時間は、月曜日から日曜日の 9:00 ～ 18:00 です。 メンテナンス期間は、管理者によって毎日 18:30 から 6:00 に構成されています。  

4. 詳細については、「[メンテナンス期間を使用する方法](../../../core/clients/manage/collections/use-maintenance-windows.md)」を参照してください。  

5. 管理者はさらに、次の設定で **[はい]** を選択することで、Endpoint Protection をインストールするカスタム デバイス クライアント設定を構成し、このカスタム クライアント設定を Windows Embedded デバイス コレクションに展開します。  

   - **[Endpoint Protection クライアントをクライアント コンピューターにインストールする]**  

   - **[書き込みフィルターのある Windows Embedded デバイスに対し、Endpoint Protection クライアントのインストールをコミットする (再起動が必要)]**  

   - **[メンテナンス期間外の Endpoint Protection クライアントのインストールと再起動を許可する]**  

     構成マネージャー クライアントをインストールするときに、これらの設定によって Endpoint Protection クライアントがインストールされ、オーバーレイへの書き込みだけではなく、インストールの一部としてオペレーティング システムに保持されます。 会社のセキュリティ ポリシーでは、マルウェア対策ソフトウェアが常にインストールされている必要があります。また、管理者はキオスクのわずかな再起動時間でも、キオスクが保護されない状態のリスクを避けたいと考えています。  

   > [!NOTE]  
   >  Endpoint Protection クライアントのインストールに必要な再起動は、1 回限りの実行で、デバイスのセットアップ期間中、観光案内所の営業前に実行されます。 定期的なアプリケーションまたはソフトウェア定義の更新プログラムの展開とは異なり、次回、同じデバイスに Endpoint Protection クライアントがインストールされるのは、会社が次のバージョンの Configuration Manager にアップグレードするときになるでしょう。  

    詳細については、「[Endpoint Protection の構成](../../../protect/deploy-use/endpoint-protection-configure.md)」を参照してください。  

6. クライアントの構成設定の準備ができたため、管理者は、構成マネージャー クライアントのインストールを準備します。 クライアントをインストールする前に、管理者は Windows Embedded デバイスの書き込みフィルターを手動で無効にする必要があります。 管理者はキオスクに付属する OEM ドキュメントを読んで、指示に従って書き込みフィルターを無効にします。  

    管理者は、会社の標準の命名規則に従ってデバイスの名前を変更し、クライアント ソース ファイルがあるマップされたドライブから、次のコマンドを指定して CCMSetup を実行し、クライアントを手動でインストールします。**CCMSetup.exe /MP:mpserver.cohovineyardandwinery.com SMSSITECODE=CO1**  

    このコマンドで、クライアントをインストールし、イントラネット FQDN **mpserver.cohovineyardandwinery.com** を持つ管理ポイントにクライアントを割り当て、 **CO1** という名前のプライマリ サイトにクライアントを割り当てます。  

    クライアントのインストールと、サイトへの状態の返信には少し時間がかかることを管理者は把握しています。 したがって管理者は、クライアントが正常にインストールされ、サイトに割り当てられて、Windows Embedded デバイス用に作成したコレクションにクライアントとして表示されることが確認できるまで、しばらく待機します。  

    管理者は、デバイスのコントロール パネルで Configuration Manager のプロパティを確認し、サイトで管理される標準の Windows コンピューターと比較し、さらに確認を行います。 たとえば、 **[コンポーネント]** タブの **[ハードウェア インベントリ エージェント]** には **[有効]** が表示され、 **[操作]** タブには **[アプリケーション展開の評価サイクル]** や **[探索データ収集サイクル]** などの 11 個の使用可能な操作が表示されることを確認します。  

    管理者はクライアントのインストールと割り当てが正常に完了し、管理ポイントからクライアント ポリシーを受信したことを確認してから、OEM からの指示に従って、書き込みフィルターを手動で有効にします。  

    詳細については、次をご覧ください。  

   -   [Windows コンピューターにクライアントを展開する方法](../../../core/clients/deploy/deploy-clients-to-windows-computers.md)  

   -   [クライアントをサイトに割り当てる方法](../../../core/clients/deploy/assign-clients-to-a-site.md)  

7. 構成マネージャー クライアントが Windows Embedded デバイスにインストールされたので、管理者は標準の Windows クライアントと同じ方法でデバイスを管理できることを確認します。 たとえば、Configuration Manager コンソールから、管理者はリモート コントロールを使用してデバイスをリモート管理したり、デバイスのクライアント ポリシーを開始したり、クライアントのプロパティとハードウェア インベントリを表示したりできます。  

    これらのデバイスは Active Directory ドメインに参加しているため、管理者は信頼されたクライアントとして手動でデバイスを承認する必要はなく、Configuration Manager コンソールから、デバイスが承認されていることを確認します。  

    詳細については、「[クライアントを管理する方法](../../../core/clients/manage/manage-clients.md)」を参照してください。  

8. インタラクティブな案内ソフトウェアをインストールするために、管理者は、**ソフトウェアの展開ウィザード**を実行して、必要なアプリケーションを構成します。 ウィザードの **[ユーザー側の表示と操作]** ページの、 **[Windows Embedded デバイスに対してフィルター処理を書き込む]** セクションで、既定のオプション **[メンテナンスの期限または期間中の変更を確定する (再起動が必要)]** をそのまま使用します。  

    管理者が書き込みフィルターでこの既定のオプションを使用することで、再起動後もアプリケーションは保持され、キオスクを使用する訪問者は常にアプリケーションを使用できます。 毎日のメンテナンス期間は、インストールのための再起動と、更新を実行するための安全な期間です。  

    管理者は、アプリケーションを Windows Embedded デバイス コレクションに展開します。  

    詳細については、[Configuration Manager でのアプリケーションの展開方法](../../../apps/deploy-use/deploy-applications.md)に関するページを参照してください。  

9. Endpoint Protection の定義ファイルの更新を構成するために、管理者は、ソフトウェア更新プログラムを使用し、自動展開規則の作成ウィザードを実行します。 **[定義ファイルの更新]** テンプレートを選択して、ウィザードで、Endpoint Protection に適切な設定を指定します。  

     ウィザードの **[ユーザー側の表示と操作]** ページには、次の設定があります。  

   - **期限に達したときの操作**: **[ソフトウェアのインストール]** チェック ボックスはオフになっています。  

   - **Windows Embedded デバイスに対してフィルター処理を書き込む**: **[メンテナンスの期限または期間中の変更を確定する (再起動が必要)]** チェック ボックスはオフになっています。  

     管理者は既定の設定をそのまま使用します。 また、これらの 2 つのオプションをこの構成にすると、メンテナンス期間のインストールとコミットまで待機せずに、Endpoint Protection のソフトウェア更新プログラムの定義を日中にオーバーレイにインストールできます。 この構成は、最新のマルウェア対策保護を実行するという企業のセキュリティ ポリシーに最も適合します。  

     > [!NOTE]  
     >  アプリケーションのソフトウェア インストールとは異なり、Endpoint Protection のソフトウェア更新プログラムの定義は、1 日に複数回など、頻繁に発生することがあります。 ソフトウェア更新プログラムの定義は、通常は小さなファイルです。 こうした種類のセキュリティ関連の展開では、メンテナンス期間まで待機するよりも、常にオーバーレイにインストールする方が、多くの場合、有益です。 構成マネージャー クライアントは、デバイスが再起動されると、すぐにソフトウェア定義更新プログラムを再インストールします。この操作で評価チェックが開始され、次回のスケジュールされた評価まで待機しないためです。  

     管理者は、自動展開規則用に、Windows Embedded デバイス コレクションを選択します。  

     詳細については、次を参照してください:  
               手順 3:Configuration Manager ソフトウェアの更新プログラムを構成して、クライアント コンピューターに定義の更新を配信する (「[Endpoint Protection の構成](../../../protect/deploy-use/endpoint-protection-configure.md)」内)  

10. 管理者は、オーバーレイのすべての変更を定期的にコミットするように、メンテナンス タスクを構成することにしました。 このタスクで、ソフトウェア定義更新プログラムの展開をサポートし、累積して、デバイスが再起動するたびに再度インストールする必要がある更新プログラムの数を減らすことができます。 経験上、この方法で、マルウェア対策プログラムを効率よく実行できます。  

    > [!NOTE]  
    >  これらのソフトウェア更新プログラムの定義は、Embedded デバイスで、変更のコミットをサポートする別の管理タスクが実行されていた場合、自動的にイメージにコミットされます。 たとえば、新しいバージョンのインタラクティブな案内ソフトウェアをインストールすると、ソフトウェア更新プログラムの定義の変更もコミットされます。 または、毎月、メンテナンス期間中にインストールする標準のソフトウェア更新プログラムをインストールすると、ソフトウェア更新プログラムの定義の変更もコミットされます。 ただし、このシナリオでは、標準のソフトウェア更新プログラムが実行されず、インタラクティブな案内ソフトウェアが頻繁に更新されない場所では、ソフトウェア定義更新プログラムが自動的にイメージにコミットされるまで、数か月かかることがあります。  

     管理者はまず、名前以外は設定されていないカスタム タスク シーケンスを作成します。 次に、タスク シーケンスの作成ウィザードを実行します。  

    1. **[新しいタスク シーケンスの作成]** ページで、管理者は **[新しいカスタム タスク シーケンスを作成する]** を選択し、 **[次へ]** をクリックします。  

    2. **[タスク シーケンス情報]** ページで、管理者はタスク シーケンスの名前に「**Maintenance task to commit changes on embedded devices**」と入力し、 **[次へ]** をクリックします。  

    3. **[概要]** ページで、管理者は **[次へ]** を選択し、ウィザードを完了します。  

       管理者は、このカスタム タスク シーケンスを Windows Embedded デバイス コレクションに展開し、毎月実行するスケジュールを構成します。 展開設定の一部として、再起動後に変更を保持するために、 **[メンテナンスの期限または期間中の変更を確定する (再起動が必要)]** チェック ボックスをオンにします。 この展開を構成するために、管理者は作成したカスタム タスク シーケンスを選択し、 **[ホーム]** タブの **[展開]** グループで、 **[展開]** をクリックして、ソフトウェアの展開ウィザードを開始します。  

    4. **[全般]** ページで、Windows Embedded デバイス コレクションを選択して、 **[次へ]** をクリックします。  

    5. **[展開設定]** ページで、管理者は **[目的]** に **[必須]** を選択して、 **[次へ]** をクリックします。  

    6. **[スケジュール]** ページで、管理者は **[新規]** をクリックして、メンテナンス期間中の週ごとのスケジュールを指定し、 **[次へ]** をクリックします。  

    7. 管理者はそれ以上は変更せずに、ウィザードを完了します。  

       詳細については、次を参照してください:  
                 「[タスクを自動化するためのタスク シーケンスの管理](../../../osd/deploy-use/manage-task-sequences-to-automate-tasks.md)」。  

11. キオスクを自動的に実行するために、管理者は、デバイスに次の設定を構成するスクリプトを記述します。  

    - パスワードなしのゲスト アカウントを使用した自動ログオン  

    - 起動時に対話型プレゼンテーション ソフトウェアを自動実行する。  

      管理者は、パッケージとプログラムを使用して、このスクリプトを Windows Embedded デバイス コレクションに展開します。 管理者がソフトウェアの展開ウィザードを実行するときに、もう一度 **[メンテナンスの期限または期間中の変更を確定する (再起動が必要)]** チェック ボックスをオンにして、再起動後も変更が維持されるようにします。  

      詳細については「[Packages and programs](../../../apps/deploy-use/packages-and-programs.md)」(パッケージとプログラム) を参照してください。  

12. 翌朝、管理者は Windows Embedded デバイスを見て、 次を確認します。  

    - キオスクがゲスト アカウントを使用して自動ログオンされている。  

    - 対話型プレゼンテーション ソフトウェアが実行中である。  

    - Endpoint Protection クライアントがインストールされ、最新のソフトウェア更新プログラム定義がある。  

    - メンテナンス期間中にデバイスが再起動した。  

      詳細については、次をご覧ください。  

    - [Endpoint Protection を監視する方法](../../../protect/deploy-use/monitor-endpoint-protection.md)  

    - [Configuration Manager でのアプリケーションの監視](../../../apps/deploy-use/monitor-applications-from-the-console.md)  

13. 管理者はキオスクを監視し、キオスクが正常に管理されていることを上司に報告します。 その結果、ビジター センター用に 20 台のキオスクを注文することになりました。  

     構成マネージャー クライアントを手動インストールする場合、書き込みフィルターを手動で無効にしてから再度有効にする必要があるので、それを避けるために、管理者は構成マネージャー クライアントのインストールとサイトの割り当てが既に含まれているカスタマイズしたイメージが注文に含まれていることを確認します。 さらに、デバイス名は会社の命名形式に従って付けます。  

     キオスクは、ビジター センターがオープンする 1 週間前に納品されます。 この間、キオスクはネットワークに接続され、キオスク用のすべてのデバイス管理は自動実行されるため、ローカル管理者は必要ありません。 管理者は、必要に応じて次のようにキオスクが機能していることを確認します。  

    -   キオスク上のクライアントが、サイトの割り当てを完了し、Active Directory ドメイン サービスから信頼されたルート キーをダウンロードしている。  

    -   キオスク上のクライアントが、自動的に Windows Embedded デバイス コレクションに追加され、メンテナンス期間で構成されている。  

    -   Endpoint Protection クライアントがインストールされ、マルウェア対策保護用の最新のソフトウェア更新プログラム定義がある。  

    -   自動的に対話型プレゼンテーション ソフトウェアがインストールされ、実行されていて、訪問者が使用できる状態である。  

14. この初期セットアップ後、更新プログラムのために再起動が必要になる状況は、ビジター センターを閉鎖する場合のみです。  
