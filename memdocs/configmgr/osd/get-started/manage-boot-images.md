---
title: ブート イメージの管理
titleSuffix: Configuration Manager
description: Configuration Manager で、OS の展開中に使用する Windows PE ブート イメージを管理する方法について説明します。
ms.date: 11/29/2019
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: how-to
ms.assetid: 97f2d81a-2c58-442c-88bc-defd5a1cd48f
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: e68a3274a32d28ac0b4ad2a611c59870ee338472
ms.sourcegitcommit: d225ccaa67ebee444002571dc8f289624db80d10
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/12/2020
ms.locfileid: "88124543"
---
# <a name="manage-boot-images-with-configuration-manager"></a>Configuration Manager でブート イメージを管理する

*適用対象:Configuration Manager (Current Branch)*

Configuration Manager のブート イメージは、OS の展開中に使用される [Windows PE](https://docs.microsoft.com/windows-hardware/manufacture/desktop/winpe-intro) (WinPE) のイメージです。 ブート イメージは、コンピューターを WinPE で起動するために使用されます。 この最小限の OS には、限られたコンポーネントとサービスが含まれています。 Configuration Manager では、WinPE を使用して、Windows インストール用にセットアップ先のコンピューターを準備します。

## <a name="default-boot-images"></a><a name="BKMK_BootImageDefault"></a> 既定のブート イメージ

既定では、Configuration Manager には、x86 プラットフォームをサポートするブート イメージが 1 つ、x64 プラットフォームをサポートするブート イメージが 1 つ用意されています。 これらのイメージは、サイト サーバー上の共有 `\\<SiteServerName>\SMS_<sitecode>\osd\boot\` の *x64* または *i386* フォルダーに格納されています。 既定のブート イメージは、実行する操作に応じて更新または再生成されます。

既定のブート イメージに記載されている任意の操作に対して、次の動作を考慮します。

- ソース ドライバー オブジェクトが有効である必要があります。 これらのオブジェクトには、ドライバーのソース ファイルが含まれます。 オブジェクトが有効でない場合、サイトでブート イメージにドライバーが追加されません。  

- 既定のブート イメージに基づいていないブート イメージは、同じ Windows PE バージョンを使用する場合でも、変更されません。  

- 変更したブート イメージを配布ポイントに再配布します。  

- 変更したブート イメージを使用するメディアを再作成します。  

- カスタマイズした/既定のブート イメージを自動的に更新しない場合は、既定の場所に保存しないでください。  

> [!NOTE]
> **[ソフトウェア ライブラリ]** 内のすべてのブート イメージに対して Configuration Manager ログ ツール (**CMTrace**) が追加されます。 Windows PE を使用している場合は、コマンド プロンプトから「`cmtrace`」と入力してツールを起動します。
>
> CMTrace は、Windows PE 内にあるログ ファイルの既定のビューアーです。

### <a name="use-updates-and-servicing-to-install-the-latest-version-of-configuration-manager"></a>更新プログラムとサービスを使用して、Configuration Manager の最新バージョンをインストールする

Windows アセスメント & デプロイメント キット (ADK) のバージョンをアップグレードし、更新プログラムとサービスを使用して、Configuration Manager の最新バージョンをインストールするときに、サイトによって既定のブート イメージが再生成されます。 この更新プログラムには、更新された Windows ADK の新しい WinPE バージョン、新しいバージョンの Configuration Manager クライアント、ドライバー、およびカスタマイズが含まれます。 サイトは、カスタム ブート イメージを変更しません。

### <a name="upgrade-from-configuration-manager-2012-to-current-branch"></a>Configuration Manager 2012 から Current Branch へのアップグレード

Configuration Manager 2012 を Current Branch にアップグレードすると、サイトで既定のブート イメージが再生成されます。 この更新プログラムには、更新された Windows ADK の新しい WinPE バージョンと新しいバージョンの Configuration Manager クライアントが含まれます。 すべてのブート イメージのカスタマイズは変更されません。 サイトは、カスタム ブート イメージを変更しません。

### <a name="update-distribution-points-with-the-boot-image"></a>ブート イメージを使用して配布ポイントを更新する

コンソールで、 **[ブート イメージ]** ノードから **[配布ポイントの更新]** アクションを使用する場合、サイトは、クライアント コンポーネント、ドライバー、およびカスタマイズを使用して対象のブート イメージを更新します。

Windows ADK インストール ディレクトリにある最新バージョンの WinPE を使用してブート イメージを再度読み込むことができます。 配布ポイントの更新ウィザードの **[全般]** ページには、次の情報があります。

- サイト サーバーにインストールされている現在の Windows ADK のバージョン
- 現在の運用クライアント バージョン
- ブート イメージの WinPE の Windows ADK バージョン
- ブート イメージに含まれる Configuration Manager クライアントのバージョン

ブート イメージのバージョンが最新でない場合は、 **[このブート イメージを Windows ADK の現在の Windows PE バージョンを使用して再度読み込む]** オプションを使用します。

> [!Important]  
> このアクションは、既定とカスタム両方のブート イメージで使用できます。 ブート イメージを再度読み込むこのプロセスでは、Configuration Manager の外部で行われた手動のカスタマイズはサイトに保持されません。 これらのカスタマイズには、サード パーティの拡張機能が含まれます。 このオプションでは、最新バージョンの WinPE と最新のクライアント バージョンを使用して、ブート イメージがリビルドされます。 ブート イメージのプロパティで指定した構成のみが再適用されます。 <!--SCCMDocs issue #1283-->

**[ブート イメージ]** ノードにも (**クライアント バージョン**) 用の新しい列が含まれています。 この列を使用すると、各ブート イメージで Configuration Manager クライアントのバージョンをすばやく表示できます。

## <a name="customize-a-boot-image"></a><a name="BKMK_BootImageCustom"></a> ブート イメージのカスタマイズ  

ブート イメージが Windows ADK のサポートされているバージョンの WinPE バージョンに基づいている場合、コンソールから[ブート イメージを変更](#BKMK_ModifyBootImages)またはカスタマイズできます。 サイトをアップグレードして、新しいバージョンの Windows ADK をインストールするとき、カスタム ブート イメージは新しいバージョンの Windows ADK で更新されません。 このことが発生すると、Configuration Manager コンソールでブート イメージをカスタマイズできません。 ただし、引き続き、アップグレード前と同様に動作します。  

ブート イメージがサイトにインストールされている Windows ADK の別のバージョンに基づいている場合は、ブート イメージをカスタマイズする必要があります。 展開イメージ サービスと管理 (DISM) コマンドライン ツールを使用するなど、別の方法を使用してこれらのブート イメージをカスタマイズします。 DISM は、Windows SDK の一部です。 詳細については、「[ブート イメージのカスタマイズ](customize-boot-images.md)」を参照してください。  

## <a name="add-a-boot-image"></a><a name="BKMK_AddBootImages"></a> ブート イメージの追加  

サイトのインストール中に、Configuration Manager は、Windows ADK のサポートされているバージョンから、WinPE バージョンに基づくブート イメージを自動的に追加します。 Configuration Manager のバージョンによっては、サポートされているバージョンの Windows ADK とは異なるバージョンの WinPE に基づくブート イメージを追加できます。 サポートされていないバージョンの WinPE が含まれるブート イメージを追加しようとすると、エラーが発生します。 次のリストに、現在サポートされている Windows ADK と WinPE バージョンを示します。

- Windows ADK バージョン: Windows 10 用 Windows ADK

- Configuration Manager コンソールでカスタマイズできる Windows PE ブート イメージのバージョン: Windows PE 10

- Configuration Manager コンソールで "*カスタマイズできない*" Windows PE ブート イメージのバージョン

  - Windows PE 3.1<sup>[注 1](#bkmk_note1)</sup>

  - Windows PE 5

たとえば、Configuration Manager コンソールを使用して、Windows ADK for Windows 10 (Windows PE 10 の構築用) で構築したブート イメージをカスタマイズします。 Windows PE 5 に基づくブート イメージの場合、Windows ADK for Windows 8 の DISM のバージョンを使用して別のコンピューターからカスタマイズします。 その後、カスタム ブート イメージを Configuration Manager コンソールに追加します。 詳細については、以下の記事を参照してください。

- [ブート イメージのカスタマイズ](customize-boot-images.md)
- [Windows 10 ADK のサポート](../../core/plan-design/configs/support-for-windows-10.md#windows-10-adk)
- [DISM でサポートされているプラットフォーム](https://docs.microsoft.com/windows-hardware/manufacture/desktop/dism-supported-platforms)

<a name="bkmk_note1"></a>

> [!NOTE]
> **注 1: Windows PE 3.1 のサポート**
>
> Windows PE "*バージョン 3.1*" に基づくブート イメージしか、Configuration Manager に追加されません。 Windows AIK for Windows 7 (Windows PE 3.0 の構築用) を Windows AIK Supplement for Windows 7 SP1 (Windows PE 3.1 の構築用) にアップグレードします。 Windows AIK Supplement for Windows 7 SP1 は、 [Microsoft ダウンロード センター](https://www.microsoft.com/download/details.aspx?id=5188)からダウンロードできます。  

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[オペレーティング システム]** を展開して、 **[ブート イメージ]** ノードを選択します。  

2. リボンの **[ホーム]** タブの **[作成]** グループで、 **[ブート イメージの追加]** を選択します。 このアクションにより、ブート イメージの追加ウィザードが開始されます。  

3. **[データ ソース]** ページで、次のオプションを指定します。  

    - **[パス]** ボックスで、ブート イメージの WIM ファイルへのパスを指定します。 このパスは、UNC 形式の有効なネットワーク パスでなければなりません。 例: `\\ServerName\ShareName\BootImageName.wim`

    - **[ブート イメージ]** ドロップダウン リストで、インポートするブート イメージを選択します。 WIM ファイルに複数のブート イメージが含まれている場合、該当するイメージを選びます。  

4. **[全般]** ページで、次のオプションを指定します。  

    - **[名前]** ボックスで、ブート イメージの一意の名前を指定します。  

    - **[バージョン]** ボックスで、ブート イメージのバージョン番号を指定します。  

    - **[コメント]** ボックスで、ブート イメージの使用方法の簡単な説明を指定します。  

5. ウィザードを完了します。  

ブート イメージが **[ブート イメージ]** ノードの一覧に表示されます。 ブート イメージを使用して OS を展開する前に、配布ポイントにブート イメージを配布します。

> [!Tip]  
> コンソールの **[ブート イメージ]** ノードの **[サイズ (KB)]** 列に、各ブート イメージの圧縮解除後のサイズが表示されます。 サイトは、ネットワーク経由でブート イメージを送信するときに、圧縮コピーを送信します。 このコピーは、通常は **[サイズ (KB)]** 列で表示されているサイズより小さくなります。  

## <a name="distribute-boot-images"></a><a name="BKMK_DistributeBootImages"></a> ブート イメージを配布する  

ブート イメージは、他のコンテンツを配布するのと同じ方法で配布ポイントに配布されます。 OS を展開するかメディアを作成する前に、少なくとも 1 つの配布ポイントにブート イメージを配布します。

ブート イメージを配布する方法の詳細については、「[Distribute content](../../core/servers/deploy/configure/deploy-and-manage-content.md#bkmk_distribute)」(コンテンツの配布) を参照してください。  

PXE を使用して OS を展開するには、ブート イメージを配布する前に次の点を考慮します。  

- PXE 要求を受け入れるための配布ポイントを構成します。  
- x86 と x64 の両方の PXE 対応ブート イメージを、少なくとも 1 つの PXE 対応配布ポイントに配布します。  
- Configuration Manager は、ブート イメージを、PXE 対応配布ポイント上の **RemoteInstall** フォルダーに配布します。  
  
PXE を使用してオペレーティング システムを展開する方法の詳細については、「[PXE を使用したネットワーク経由での Windows の展開](../deploy-use/use-pxe-to-deploy-windows-over-the-network.md)」を参照してください。  

## <a name="modify-a-boot-image"></a><a name="BKMK_ModifyBootImages"></a> ブート イメージの変更  

デバイス ドライバーをイメージに追加または削除したり、ブート イメージのプロパティを編集したりします。 追加または削除するドライバーには、ネットワーク ドライバーまたはストレージ ドライバーが含まれる可能性があります。 ブート イメージを変更する際には、以下の点をご考慮ください。  

- ドライバーをブート イメージに追加する前に、デバイス ドライバー カタログにドライバーをインポートして有効にします。  

- ブート イメージを変更しても、ブート イメージが参照する関連パッケージは一切変更されません。  

- ブート イメージに変更を加えたら、既にある配布ポイントでブート イメージを**更新**します。 このプロセスにより、ブート イメージの最新バージョンがクライアントに使用可能になります。 詳細については、「[配布したコンテンツの管理](../../core/servers/deploy/configure/deploy-and-manage-content.md#bkmk_manage)」を参照してください。  

### <a name="modify-the-properties-of-a-boot-image"></a>ブート イメージのプロパティを変更する  

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[オペレーティング システム]** を展開して、 **[ブート イメージ]** ノードを選択します。  

2. 変更するブート イメージを選択します。  

3. リボンの **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]** を選択します。  

4. ブート イメージの動作を変更するには、以下の設定を行います。  

#### <a name="images"></a>画像

外部ツールを使用してブート イメージのプロパティを変更した場合は、 **[イメージ]** タブで **[再読み込み]** を選択します。  

#### <a name="drivers"></a>ドライバー

**[ドライバー]** タブで、WinPE をブートするために必要な Windows デバイス ドライバーを追加します。 デバイス ドライバーを追加する際には、以下の点を考慮してください。  

- ブート イメージに追加するドライバーがブート イメージのアーキテクチャと一致していることを確認します。  

- ブート イメージのアーキテクチャ用のドライバーのみを表示するには、 **[ブート イメージのアーキテクチャに一致しないドライバーを非表示にする]** を選択します。 ドライバーのアーキテクチャは、製造元から提供される INF で報告されるアーキテクチャに基づいています。  

- WinPE には多くのドライバーが既に組み込まれています。 WinPE に含まれていないネットワーク ドライバーとストレージ ドライバーだけを追加します。  

- WinPE で他のドライバーが必要ない場合は、ネットワーク ドライバーとストレージ ドライバーのみをブート イメージに追加します。  

- ストレージ ドライバーとネットワーク ドライバーのみを表示するには、 **[記憶域クラスおよびネットワーク クラス以外のドライバーを非表示にする (ブート イメージの場合)]** を選択します。 このオプションでは、ビデオ ドライバーやモデム ドライバーなど、通常はブート イメージに必要ない他のドライバーも非表示になります。  

- 有効なデジタル署名がないドライバーを非表示にするには、 **[デジタル署名されていないドライバーを非表示にする]** を選択します。  

> [!NOTE]  
> ブート イメージに追加する前に、デバイス ドライバーをドライバー カタログにインポートします。 デバイス ドライバーをインポートする方法については、「[ドライバーの管理](manage-drivers.md)」を参照してください。  

#### <a name="customization"></a>カスタマイズ

**[カスタマイズ]** タブで、以下の設定を選択します。  

- **[起動前コマンドを有効にする]** オプションをオンにして、タスク シーケンスを実行する前に実行するコマンドを指定します。 このオプションを有効にする場合は、実行するコマンド ラインと、コマンドに必要なサポート ファイルも指定します。  

    > [!WARNING]  
    > `cmd /c` をコマンド ラインの先頭に追加します。 `cmd /c` を指定しない場合、実行後にコマンドは閉じられません。 展開がコマンドの完了を待機し続けて、その他の構成済みのコマンドや操作が開始されません。  

    > [!TIP]  
    > タスク シーケンス メディアの作成中に、ウィザードによって、パッケージ ID と起動前コマンド ラインが、**CreateTSMedia.log** ファイルに書き込まれます。 この情報には、すべてのタスク シーケンス変数の値が含まれます。 このログは、Configuration Manager コンソールを実行しているコンピューター上にあります。 このログ ファイルで、タスク シーケンス変数の値を確認します。  

- **[Windows PE の背景]** 設定を構成して、既定の WinPE の背景またはカスタムの背景のいずれを使用するのかを指定します。  

- **Windows PE のスクラッチ領域**を構成します。これは、WinPE で使用される一時記憶域 (RAM ドライブ) です。 たとえば、WinPE 内で実行するアプリケーションが一時ファイルに書き込む必要がある場合、WinPE はメモリ内のスクラッチ領域にファイルをリダイレクトすることで、ハード ディスクが存在することをシミュレートします。 既定では、この量は、RAM が 1 GB を超えるデバイスで 512 MB、それ以外の場合は 32 MB です。  

- ブート イメージの展開時に **F8** キーを使用してコマンド プロンプトを開くには、 **[コマンド サポートを有効にする (テストのみ)]** を選びます。 このオプションは、展開をテストするときのトラブルシューティングに役立ちます。 セキュリティ上の問題のため、運用環境の展開ではこの設定を使用しないことをお勧めします。  

- **WinPE の既定のキーボード レイアウトを設定する**: <!--4910348-->バージョン 1910 以降では、ブート イメージの既定のキーボード レイアウトを構成します。 en-us 以外の言語を選択した場合でも、Configuration Manager によって、使用可能な入力ロケールに en-us が含められます。 デバイス上の初期のキーボード レイアウトは選択されたロケールですが、ユーザーは必要に応じてデバイスを en-us に切り替えることができます。

> [!Tip]
> スクリプトからこれらの設定を構成するには、PowerShell コマンドレット [Set-CMBootImage](https://docs.microsoft.com/powershell/module/configurationmanager/set-cmbootimage?view=sccm-ps) を使用します。

#### <a name="optional-components"></a>オプション コンポーネント

**[オプション コンポーネント]** タブで、Configuration Manager で使用するために Windows PE に追加するコンポーネントを指定します。 使用可能なオプション コンポーネントの詳細については、[WinPE: パッケージの追加 (オプション コンポーネント リファレンス)](https://docs.microsoft.com/windows-hardware/manufacture/desktop/winpe-add-packages--optional-components-reference) に関するページを参照してください。  

以下のコンポーネントは Configuration Manager では必須であり、常にブート イメージに追加されます。

- スクリプト (WinPE-Scripting)
- スタートアップ (WinPE-SecureStartup)
- ネットワーク (WinPE-WDS-Tools)
- スクリプト (WinPE-WMI)

**[コンポーネント]** の一覧には、このブート イメージに追加される追加の項目が表示されます。 さらにコンポーネントを追加するには、金色のアスタリスクを選択します。 コンポーネントを削除するに、一覧で選択して、赤い X 印を選択します。

次のコンポーネントはよく使用されます。

- Microsoft .NET (WinPE-NetFX): このコンポーネントは、PowerShell の前提条件です。 より大きいオプション コンポーネントの 1 つです。  
- Windows PowerShell (WinPE-PowerShell): このコンポーネントでは .NET が必要であり、制限付きの PowerShell サポートが追加されます。 タスク シーケンスの WinPE フェーズの間にカスタム PowerShell スクリプトを実行する場合は、このコンポーネントを追加します。 他の PowerShell コマンドレットで他のコンポーネントが必要になる場合があります。
- HTML (WinPE-HTA): タスク シーケンスの WinPE フェーズの間にカスタム HTML アプリケーションを実行する場合は、このコンポーネントを追加します。

言語の追加の詳細については、「[複数の言語を構成する](#BKMK_BootImageLanguage)」を参照してください。

#### <a name="data-source"></a>データ ソース

**[データ ソース]** タブで、以下の設定を更新します。  

- ブート イメージのソース ファイルを変更するには、 **[イメージ パス]** と **[イメージ インデックス]** を設定します。  

- サイトでブート イメージを更新するスケジュールを作成するには、 **[スケジュールに従って配布ポイントを更新する]** を選びます。  

- 別のコンテンツ用の容量を確保するために、このパッケージのコンテンツのクライアント キャッシュを期限切れにする必要がない場合、 **[クライアント キャッシュの内容を保持する]** を選びます。  

- 配布ポイントでブート イメージ パッケージが更新された場合に、変更のあったファイルのみ配布するように指定するには、 **[バイナリ差分レプリケーションを有効にする]** (BDR) を選びます。 この設定は、サイト間のネットワーク トラフィックを最小限に抑えます。 BDR は、ブート イメージ パッケージが大きく、変更が比較的少ない場合に特に便利です。  

- ブート イメージを PXE 対応の展開で使用する場合、 **[このブート イメージを PXE 対応の配布ポイントから展開する]** を選びます。 詳細については、「[PXE を使用したネットワーク経由での Windows の展開](../deploy-use/use-pxe-to-deploy-windows-over-the-network.md)」を参照してください。  

#### <a name="data-access"></a>データ アクセス

**[データ アクセス]** タブでは、パッケージの共有の設定を構成できます。 環境で必要な場合は、 **[Copy the content in this package to a package share on distribution points]\(このパッケージのコンテンツを配布ポイントのパッケージ共有にコピーする\)** オプションを設定します。 さらに **[Use a custom name for the package share]\(パッケージ共有のカスタム名を使用する\)** オプションを選択して、カスタムの **[共有名]** を指定できます。 このオプションを有効にする場合は、配布ポイントに追加のディスク容量が必要になります。 このブート イメージを受け取るすべての配布ポイントに適用されます。

#### <a name="distribution-settings"></a>配布の設定

**[配布の設定]** タブで、以下の設定を選択します。  

- **[配布の優先順位]** リストで、優先度レベルを指定します。 Configuration Manager は、サイトで複数のパッケージを同じ配布ポイントに配布するときに、この優先順位リストを使用します。  

- 優先配布ポイントへのオンデマンドのコンテンツ配布を有効にする場合は、 **[オンデマンド配布を有効にする]** を選択します。 この設定を有効にすると、クライアントでパッケージのコンテンツが要求されて、そのコンテンツがどの配布ポイントにもない場合は、管理ポイントからコンテンツが配布されます。 詳細については、「[オンデマンドのコンテンツ配布](../../core/plan-design/hierarchy/fundamental-concepts-for-content-management.md#on-demand-content-distribution)」を参照してください。  

- 事前設定済みコンテンツが有効になっている配布ポイントにブート イメージを配布する方法を指定するには、 **[事前設定された配布ポイントの設定]** を設定します。 事前設定済みコンテンツについて詳しくは、「 [Prestage content](../../core/servers/deploy/configure/deploy-and-manage-content.md#bkmk_prestage)」をご覧ください。  

#### <a name="content-locations"></a>コンテンツの場所

**[コンテンツの場所]** タブで、配布ポイントまたは配布ポイント グループを選択して、次の操作を使用します。  

- **検証**: 選択した配布ポイントまたは配布ポイント グループのブート イメージ パッケージの整合性を確認するします。  

- **再配布**: 選択した配布ポイントまたは配布ポイント グループに再度ブート イメージを配布します。  

- **削除**: 選択した配布ポイントまたは配布ポイント グループから、ブート イメージを削除します。  

#### <a name="security"></a>セキュリティ

**[セキュリティ]** タブには、このオブジェクトへのアクセス許可を持つ管理ユーザーが表示されます。

## <a name="configure-a-boot-image-for-pxe"></a><a name="BKMK_BootImagePXE"></a> PXE 用のブート イメージを構成する  

PXE ベースの展開用のブート イメージを使用するには、その前に PXE 対応の配布ポイントから展開するブート イメージを構成します。  

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[オペレーティング システム]** を展開して、 **[ブート イメージ]** ノードを選択します。  

2. 変更するブート イメージを選択します。  

3. リボンの **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]** を選択します。  

4. **[データ ソース]** タブで、 **[このブート イメージを PXE 対応の配布ポイントから展開する]** を選びます。 詳細については、「[PXE を使用したネットワーク経由での Windows の展開](../deploy-use/use-pxe-to-deploy-windows-over-the-network.md)」を参照してください。  

## <a name="configure-multiple-languages"></a><a name="BKMK_BootImageLanguage"></a> 複数の言語を構成する

> [!TIP]
> バージョン 1910 以降では、ブート イメージのプロパティ上にある既定のキーボード レイアウトを構成します。 詳細については、「[カスタマイズ](#customization)」を参照してください。<!--4910348-->

ブート イメージは言語に依存しません。 この機能により、1 つのブート イメージを使用して、WinPE でタスク シーケンス テキストを複数の言語で表示することができます。 ブート イメージの **[オプション コンポーネント]** タブから適切な言語のサポートを含めます。次に、表示する言語を示すための適切なタスク シーケンス変数を設定します。 展開される OS の言語は、WinPE の言語に依存しません。 WinPE でユーザーに表示される言語は、次のように決定されます。  

- ユーザーが既存の OS からタスク シーケンスを実行すると、Configuration Manager ではユーザー用に構成された言語が自動的に使用されます。 必須の展開期限の結果としてタスク シーケンスが自動的に実行された場合、Configuration Manager では OS の言語が使用されます。  

- PXE またはメディアを使用する OS 展開の場合、起動前コマンドの一部として **SMSTSLanguageFolder** 変数で言語 ID 値を設定します。 コンピューターを WinPE で起動すると、変数で指定した言語でメッセージが表示されます。 指定したフォルダーの言語リソース ファイルにアクセスできない場合、または変数を設定しなかった場合、WinPE ではメッセージが既定の言語で表示されます。  

    > [!NOTE]  
    > パスワードでメディアを保護すると、パスワードの入力をユーザーに求めるテキストは、常に WinPE の言語で表示されます。  

PXE またはメディアから開始される OS の展開の場合、次の手順で WinPE の言語を設定します。  

### <a name="set-the-windows-pe-language-for-a-pxe-or-media-initiated-os-deployment"></a>PXE またはメディアから開始される OS の展開に対して Windows PE の言語を設定する  

1. ブート イメージを更新する前に、適切なタスク シーケンス リソース ファイル (tsres.dll) がサイト サーバーの対応する言語フォルダー内にあることを確認します。 たとえば、英語のリソース ファイルがある場所は `<ConfigMgrInstallationFolder>\OSD\bin\x64\00000409\tsres.dll` です。  

2. 起動前コマンドの一部として、**SMSTSLanguageFolder** 環境変数を適切な言語 ID に設定します。 言語 ID は、16 進数形式ではなく 10 進数を使用して指定する必要があります。 たとえば、言語 ID を英語に設定するには、フォルダー名の 16 進数の 00000409 ではなく、10 進数の **1033** を指定します。  
