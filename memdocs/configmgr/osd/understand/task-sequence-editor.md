---
title: タスク シーケンス エディターを使用する
titleSuffix: Configuration Manager
description: Configuration Manager コンソールでタスク シーケンス エディターを使用する方法について説明します
ms.date: 11/29/2019
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: how-to
ms.assetid: a4e8bb56-ee85-49fd-8b1c-c8f513cec671
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 405617277953eae61fbfce4fdb9b3a7d280aedcf
ms.sourcegitcommit: d225ccaa67ebee444002571dc8f289624db80d10
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/12/2020
ms.locfileid: "88124450"
---
# <a name="use-the-task-sequence-editor"></a>タスク シーケンス エディターを使用する

*適用対象:Configuration Manager (Current Branch)*

Configuration Manager コンソールでタスク シーケンスを編集するには、**タスク シーケンス エディター**を使用します。 このエディターを使用すると、次の操作を行えます。  

- タスク シーケンスの読み取り専用ビューを開く

- タスク シーケンスのステップを追加または削除する  

- タスク シーケンスのステップの順序を変更する  

- ステップのグループを追加または削除する  

- タスク シーケンス間でステップをコピーして貼り付ける

- エラーが発生した場合にタスク シーケンスを続行するかどうかなど、ステップのオプションを設定する  

- タスク シーケンスのステップとグループに条件を追加する  

- タスク シーケンス内のステップ間で条件をコピーして貼り付けます。

- タスク シーケンスを検索して、ステップをすばやく見つける

タスク シーケンスを編集する前に、タスク シーケンスを作成する必要があります。 詳細については、[タスク シーケンスの管理と作成](../deploy-use/manage-task-sequences-to-automate-tasks.md)に関する記事をご覧ください。

## <a name="about-the-task-sequence-editor"></a>タスク シーケンス エディターについて

タスク シーケンス エディターには、次のコンポーネントが含まれています。

![タスク シーケンス エディターのサンプル ウィンドウの注釈付きスクリーンショット](media/task-sequence-editor.png)

<!-- The following numbered steps correspond to annotations in the above screenshot. Don't change the step numbers without also revising the image! -->

1. タスクシーケンスの名前
2. 検索。 詳細については、「[検索](#bkmk_search)」を参照してください。
3. シーケンス内の選択したグループまたはステップの**プロパティ**

    特定のステップのプロパティとオプションの詳細については、[タスク シーケンスのステップについて](task-sequence-steps.md)の記事をご覧ください。

4. シーケンス内の選択したグループまたはステップの**オプション**

    すべてのステップを対象にした全般オプション、または特定のステップのオプションの詳細については、[タスク シーケンスのステップについて](task-sequence-steps.md)の記事をご覧ください。

    条件を構成する方法の詳細については、「[条件](#bkmk_conditions)」をご覧ください。

5. グループまたはステップを**追加**する
6. グループまたはステップを**削除**する
7. すべてのグループを折りたたむ、またはすべてのグループを展開する
8. シーケンス内のグループまたはステップの位置を移動する (上へ移動、下へ移動)
9. タスク シーケンス:
    - ステップとグループの順序を確認します。
    - グループを展開または折りたたみます。
    - ステップまたはグループをその **[オプション]** で無効にすると、シーケンスがグレー表示されます。
    - ステップに問題がある場合は、ステップのアイコンが赤いエラーに変わります。 たとえば、必要な値が欠落している場合です。
10. **OK**: 保存して閉じる
11. **キャンセル**:変更を保存せずに閉じる
12. **適用**:変更を保存して開いたままにする

標準の Windows コントロールを使用して、タスク シーケンス エディターのサイズを変更できます。 2 つのメイン ウィンドウの幅を変更するには、マウスを使用してタスク シーケンスとステップのプロパティの間のバーを選択し、左または右にドラッグします。

## <a name="view-a-task-sequence"></a><a name="bkmk_view"></a> タスク シーケンスの表示

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[オペレーティング システム]** を展開して **[タスク シーケンス]** ノードを選択します。  

2. **[タスク シーケンス]** 一覧で、表示するタスク シーケンスを選択します。  

3. リボンの **[ホーム]** タブにある **[タスク シーケンス]** グループで、 **[表示]** を選択します。

    > [!TIP]
    > これは既定の操作です。 タスク シーケンスをダブルクリックすると、タスク シーケンスが**表示**されます。

この操作により、タスク シーケンス エディターが読み取り専用モードで開きます。 このモードでは、次の操作を行うことができます。

- すべてのグループ、ステップ、プロパティ、およびオプションを表示する
- グループの展開と折りたたみ
- タスク シーケンスを検索する
- エディター ウィンドウのサイズを変更する

この読み取り専用モードでは、ステップや条件をコピーするなどの変更を加えることはできません。 また、この操作で、編集のためにタスク シーケンスがロックされることもありません。 こうしたロックの詳細については、[タスク シーケンスを編集するためのロックの再利用](#bkmk_sedo)に関するセクションを参照してください。

タスク シーケンスに変更を加えるには、読み取り専用モードで開いているタスク シーケンス エディターを閉じます。 次に、タスク シーケンスを[編集](#bkmk_edit)します。

> [!NOTE]  
> タスク シーケンスの作成ウィザードで作成されたタスク シーケンスを表示または編集する場合、ステップの名前をステップのアクションや種類にすることができます。 たとえば、"Partition disk 0" という名前のステップがあり、それがステップの種類「 [Format and Partition Disk](task-sequence-steps.md#BKMK_FormatandPartitionDisk)」に対するアクションであるとします。 すべてのタスク シーケンス ステップの内容は、それらの*種類*によって示され、必ずしもエディターに表示されるステップの名前によって示されるわけではありません。  

## <a name="edit-a-task-sequence"></a><a name="bkmk_edit"></a> タスク シーケンスの編集

既存のタスク シーケンスを変更するには、次の手順を使用します。  

1. Configuration Manager コンソールで、 **[ソフトウェア ライブラリ]** ワークスペースに移動し、 **[オペレーティング システム]** を展開して **[タスク シーケンス]** ノードを選択します。  

2. **[タスク シーケンス]** 一覧で、編集するタスク シーケンスを選択します。  

3. リボンの **[ホーム]** タブにある **[タスク シーケンス]** グループで、 **[編集]** を選択します。 その後、次のいずれかの操作を行います。  

    - **ステップを追加する**: **[追加]** を選択し、カテゴリを選択して、追加するステップを選択します。 たとえば、「[コマンドラインの実行](task-sequence-steps.md#BKMK_RunCommandLine)」ステップを追加するには、 **[追加]** を選択し、 **[全般]** カテゴリ、 **[コマンドラインの実行]** の順に選択します。 この操作により、現在選択されているステップの後にステップが追加されます。

    - **グループを追加する**: **[追加]** を選択して、 **[新しいグループ]** を選択します。 グループを追加したら、そのグループにステップを追加します。  

    - **順序を変更する**:順序を変更するステップまたはグループを選択します。 次に、 **[上へ移動]** または **[下へ移動]** アイコンを使用します。 一度に移動できるステップまたはグループは 1 つのみです。 これらの操作は、グループまたはステップを右クリックして行うこともできます。

        グループまたはステップの切り取り、コピー、および貼り付けを行うことができます。 項目を右クリックして、操作を選択します。 また、操作ごとに標準のキーボード ショートカットを使用することもできます。

        - 切り取り:**Ctrl** + **X**
        - コピー:**Ctrl** + **C**
        - 貼り付け:**Ctrl** + **V**

    - **ステップまたはグループを削除する**: ステップまたはグループを選択して、 **[削除]** を選択します。  

4. **[OK]** を選択して変更を保存し、ウィンドウを閉じます。 変更を破棄する場合は、 **[キャンセル]** を選択してウィンドウを閉じます。 **[適用]** を選択して変更を保存し、タスク シーケンス エディターは開いたままにします。  

使用可能なタスク シーケンス ステップの一覧については、「[タスク シーケンスのステップ](task-sequence-steps.md)」を参照してください。  

> [!IMPORTANT]  
> 編集の結果としてオブジェクトに関連付けられていない参照がタスク シーケンスにできた場合、閉じる前に参照の修正を求められます。 次のように対処できます。  
>
> - 参照を修正する
> - 参照されていないオブジェクトをタスク シーケンスから削除する  
> - 壊れた参照が修正または削除されるまで、失敗したタスク シーケンス ステップを一時的に無効にする  

タスク シーケンス エディターの複数のインスタンスを同時に開くことができます。 この動作により、複数のタスク シーケンスを比較したり、タスク シーケンス間でステップをコピーして貼り付けたりすることができます。 あるタスク シーケンスを**編集**し、別のタスク シーケンスを**表示**できますが、両方の操作を同じタスク シーケンスに対して行うことはできません。

## <a name="conditions"></a><a name="bkmk_conditions"></a> 条件

条件を使用すると、タスク シーケンスの動作を制御できます。 条件は、1 つのステップまたはステップのグループに追加します。 タスク シーケンスでは、デバイスでステップを実行する前に、条件を評価します。 条件が true と評価された場合にのみ、ステップが実行されます。 条件が false と評価された場合、タスク シーケンスはそのグループまたはステップをスキップします。

**[オプション]** タブを使用すると、条件を管理できます。

![タスク シーケンス エディターの [オプション] タブで条件を管理する](media/4621098-copy-paste-ts-condition.png)

次の種類の条件を使用できます。

- **If ステートメント**:*if* ステートメントを使用して条件をグループ化します。 **[All conditions] (すべての条件)** 、 **[Any condition] (いずれかの条件)** 、または **[なし]** を評価できます。

- **タスク シーケンス変数**。 タスク シーケンス環境で組み込み、アクション、カスタム、または読み取り専用の[タスク シーケンス変数](task-sequence-variables.md)の現在の値を評価します。 詳細については、[ステップの条件](using-task-sequence-variables.md#bkmk_access-condition)に関する記事を参照してください。

    > [!NOTE]
    > この条件では配列変数を使用できますが、特定の配列メンバーを指定する必要があります。 たとえば、`OSDAdapter0EnableDHCP` は*最初*のネットワーク アダプターが DHCP を有効にするかどうかを指定します。 詳細については、「[配列変数](using-task-sequence-variables.md#bkmk_array)」を参照してください。

- **OS のバージョン**:タスク シーケンスが実行されているデバイスの OS バージョンを評価します。 この一覧は、Configuration Manager 全体で使用される一般的な OS バージョンです。 Windows 10 の特定バージョンなど、より詳細な OS バージョンを評価するには、**WMI へのクエリ**の条件を使用します。

- **OS の言語**:タスク シーケンスが実行されているデバイスの OS の言語を評価します。 この一覧には、Windows でサポートされている 257 言語が含まれています。

- **ファイルのプロパティ**:タスク シーケンスが実行されているデバイス上の任意のファイルのバージョンまたはタイム スタンプを評価します。

- **フォルダーのプロパティ**:タスク シーケンスが実行されているデバイス上の任意のフォルダーのタイムスタンプを評価します。

- **レジストリ設定**:タスク シーケンスが実行されているデバイスのレジストリ キー値を評価します。

- **WMI へのクエリ**:タスク シーケンスが実行されているデバイスで評価する名前空間とクエリを指定します。

- **インストール済みソフトウェア**:タスク シーケンスが実行されているデバイスで一致する製品情報を読み込むための Windows インストーラー ファイルを指定します。 特定の製品またはその製品の任意のバージョンと照合できます。

### <a name="cmdlets-for-conditions"></a>条件のコマンドレット

次の PowerShell コマンドレットを使用して条件を管理します。<!-- SCCMDocs #1118 -->

- [Get-CMTSStepConditionFile](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionFile?view=sccm-ps)
- [Get-CMTSStepConditionFolder](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionFolder?view=sccm-ps)
- [Get-CMTSStepConditionIfStatement](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionIfStatement?view=sccm-ps)
- [Get-CMTSStepConditionOperatingSystem](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionOperatingSystem?view=sccm-ps)
- [Get-CMTSStepConditionQueryWmi](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionQueryWmi?view=sccm-ps)
- [Get-CMTSStepConditionRegistry](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionRegistry?view=sccm-ps)
- [Get-CMTSStepConditionSoftware](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionSoftware?view=sccm-ps)
- [Get-CMTSStepConditionVariable](https://docs.microsoft.com/powershell/module/configurationmanager/Get-CMTSStepConditionVariable?view=sccm-ps)

### <a name="copy-and-paste-conditions"></a>コピーと貼り付けの条件

<!-- 4621098 -->

バージョン 1910 以降は、あるステップの条件を別のステップに再利用する場合に、タスク シーケンス エディター内で条件をコピーして貼り付けることができます。 切り取るかコピーする条件を選択します。 条件に子が含まれている場合は、ブロック全体がコピーされます。 クリップボード上に条件がある場合は、次のオプションを使用して貼り付けることができます。

- 前に貼り付け
- 後に貼り付け
- 下に貼り付け (入れ子になった条件にのみ適用)

標準のキーボード ショートカットを使用して、コピー (**CTRL** + **C**) と切り取り (**CTRL** + **X**) を行います。 標準の **CTRL** + **V** キーボード ショートカットでは、**後に貼り付け**操作が実行されます。

条件を一覧の上または下に移動する新しいオプションもあります。

> [!Note]  
> タスク シーケンス内のステップ間で条件をコピーして貼り付けることができます。 異なるタスク シーケンス間では、このアクションはサポートされません。

## <a name="reclaim-lock-for-editing"></a><a name="bkmk_sedo"></a>編集するためにロックを再利用する

<!--3699337-->
Configuration Manager コンソールが応答しなくなった場合は、30 分後にロックの期限が切れるまで、さらに変更を加えられないようにロックされることがあります。 このロックは、Configuration Manager SEDO (分散オブジェクトでの編集のシリアル化) システムの一部です。 詳細については、「[Configuration Manager SEDO](../../develop/core/understand/sedo.md)」を参照してください。

バージョン 1906 以降は、タスク シーケンスのロックを解除できます。 このアクションは、サイトがロックを付与できる同じデバイス上で、ロックされている自分のユーザー アカウントにのみ適用されます。 ロックされているタスク シーケンスにアクセスしようとすると、**変更を破棄**して、オブジェクトの編集を続けられるようになりました。 これらの変更は、ロックの期限が切れたときに、いずれにしても失われます。

> [!TIP]
> バージョン 1910 以降では、Configuration Manager コンソール内の任意のオブジェクトのロックを解除できます。 詳細については、「[Configuration Manager コンソールの使用](../../core/servers/manage/admin-console.md#bkmk_sedo)」を参照してください。<!--4786915-->

## <a name="search"></a><a name="bkmk_search"></a> 検索

<!-- 4621085 -->

多くのグループとステップが含まれる大規模なタスク シーケンスがある場合、特定のステップを見つけるのが難しいことがあります。 バージョン 1910 以降は、タスク シーケンス エディター内で検索できるようになりました。 これにより、タスク シーケンス内のステップをすばやく検索できるようになります。

![タスク シーケンス エディター内での検索](media/4621085-task-sequence-search.png)

開始するには、検索用語を入力します。 次の種類を使用して検索の範囲を限定できます。

- ステップ名
- ステップの説明
- ステップの種類
- グループ名
- グループの説明
- 変数名
- 状態
- 他のコンテンツ、たとえば変数の値やコマンド ラインのような文字列

既定では、すべての範囲が有効になります。

次の属性を使ってすべてのステップをフィルター処理することもできます。

- エラー時に続行する
- 条件付き

既定では、どちらのフィルターも有効になりません。

検索を行うと、エディター ウィンドウでは検索条件に一致するステップが黄色で強調表示されます。

次のキーボード ショートカットを使って、すばやくこれらの検索フィールドにアクセスし、検索結果の間を移動します。

- **Ctrl** + **F**: 検索文字列を入力します
- **Ctrl** + **O**: 結果の範囲を指定する検索オプションを選択します
- **F3** または **Enter**: 結果を前方に移動します
- **Shift** + **F3**: 結果を後方に移動します

## <a name="see-also"></a>関連項目

- [タスク シーケンスの管理および作成方法](../deploy-use/manage-task-sequences-to-automate-tasks.md)

- [タスク シーケンスのステップについて](task-sequence-steps.md)

- [タスク シーケンス変数の使用方法](using-task-sequence-variables.md)

- [Configuration Manager コンソールの使用](../../core/servers/manage/admin-console.md)
