---
title: サーバー グループの提供
titleSuffix: Configuration Manager
description: Configuration Manager コンソールには、更新プログラムとコンプライアンスを監視するためのアラートとステータスがあります。
author: mestew
ms.author: mstewart
manager: dougeby
ms.date: 04/01/2020
ms.topic: conceptual
ms.prod: configuration-manager
ms.technology: configmgr-sum
ms.assetid: 304a83ea-0f72-437d-9688-2e6e0c7526dd
ms.openlocfilehash: 7d6d8bef145e14547e5e6a726a93cb9470b94afd
ms.sourcegitcommit: bbf820c35414bf2cba356f30fe047c1a34c5384d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/21/2020
ms.locfileid: "81709190"
---
# <a name="service-a-server-group"></a>サーバー グループの提供

*適用対象:Configuration Manager (Current Branch)*

>[!IMPORTANT]
> - Configuration Manager バージョン 2002 以降では、サーバー グループはオーケストレーション グループに置き換えられました。 詳細については、[オーケストレーション グループ](orchestration-groups.md)に関するページを参照してください。
> - プレリリース機能は、運用環境での初期テスト用の Current Branch に含まれている機能です。 これらの機能は完全にサポートされていますが、現在開発中のため、プレリリースのカテゴリから移動するまでは変更が行われる可能性があります。 使用するには、この機能を有効にする必要があります。 詳細については、「[更新プログラムからプレリリース機能を使用する](../../core/servers/manage/install-in-console-updates.md#bkmk_prerelease)」を参照してください。

Configuration Manager バージョン 1606 以降では、コレクションにサーバー グループの設定を構成して、ソフトウェア更新プログラムをインストールするコレクション内のコンピューターの数、割合、または順序を定義できます。 また、カスタム アクションを実行する展開前および展開後の PowerShell スクリプトも構成できます。

サーバー グループの設定が構成されているコレクションにソフトウェア更新プログラムを展開するとき、Configuration Manager は、特定の時点でソフトウェア更新プログラムをインストールできるコレクション内のコンピューターの数を決定し、同じ数の展開ロックを使用できるようにします。 展開ロックを取得したコンピューターだけが、ソフトウェア更新プログラムのインストールを開始します。 展開ロックが利用できる場合、コンピューターは展開ロックを取得し、ソフトウェア更新プログラムをインストールした後、ソフトウェア更新プログラムのインストールが正常に完了したら、展開ロックを解放します。 その後、展開ロックは他のコンピューターで利用できるようになります。 コンピューターが展開ロックを解放できない場合は、ユーザーがコレクションのすべてのサーバー グループの展開ロックを手動で解放できます。

>[!IMPORTANT]
>コレクション内のすべてのコンピューターを、同じサイトに割り当てる必要があります。

#### <a name="to-create-a-collection-for-a-server-group"></a>サーバー グループのコレクションを作成するには  
サーバー グループの設定は、デバイス コレクションのプロパティで構成します。 サーバー グループをサービスするには、コレクション内のすべてのメンバーが同じサイトに割り当てられている必要があります。 コレクションを作成してサーバー グループの設定を構成するには、次の手順のようにします。
1.  サーバー グループ内のコンピューターを含む[デバイス コレクションを作成](../../core/clients/manage/collections/create-collections.md)します。  

2.  **[資産とコンプライアンス]** ワークスペースで **[デバイス コレクション]** をクリックし、サーバー グループ内のコンピューターを含むコレクションを右クリックして、 **[プロパティ]** をクリックします。  

3.  **[全般]** タブで **[すべてのデバイスが同じサーバー グループに属す]** を選択し、 **[設定]** をクリックします。  

4.  **[サーバー グループ設定]** ページで、次のいずれかの設定を指定します。  

    -   **同時更新を許可するコンピューターの割合**: 任意の時点で特定の割合のクライアントのみを更新するように指定します。 たとえば、コレクションに 10 のクライアントがあり、クライアントの 30% を同時に更新するようにコレクションが構成されている場合は、任意の時点で 3 つのクライアントだけがソフトウェア更新プログラムをインストールします。  

    -   **同時更新を許可するコンピューターの数**: 任意の時点で特定の数のクライアントのみを更新するように指定します。  

    -   **メンテナンス シーケンスを指定する**: コレクション内のクライアントが、構成した順番で 1 つずつ更新されるように指定します。 クライアントは、一覧で前にあるクライアントがソフトウェア更新プログラムのインストールを完了しないと、ソフトウェア更新プログラムをインストールできません。  

5.  展開前 (ノードのドレイン) スクリプトまたは展開後 (ノードの再開) スクリプトを使用するかどうかを指定します。  

    > [!WARNING]
    > カスタム スクリプトにはマイクロソフトの署名はありません。 これらのスクリプトの整合性は、ユーザーの責任で維持してください。

    > [!TIP]  
    > 次の例は、現在の時刻をテキスト ファイルに書き込む、展開前スクリプトと展開後スクリプトをテストするときに使用できます。  
    >   
    >  **展開前**  
    >   
    >  `#Start`  
    >   
    >  `$a = Get-Date`  
    >   
    >  `Write-Output "Universal Time: " + $a.ToUniversalTime()  |`  
    >   
    >  `Out-File C:\Windows\Temp\start.txt`  
    >   
    >  **展開後**  
    >   
    >  `#End`  
    >   
    >  `$a = Get-Date`  
    >   
    >  `Write-Output "Universal Time: " + $a.ToUniversalTime()  |`  
    >   
    >  `Out-File C:\Windows\Temp\end.txt`  

## <a name="deploy-software-updates-to-the-server-group-and-monitor-status"></a>ソフトウェア更新プログラムをサーバー グループに展開して状態を監視する  
サーバー グループのコレクションにソフトウェア更新プログラムを展開するには、標準的な展開プロセスを使用します。 ソフトウェア更新プログラムを展開した後は、Configuration Manager コンソールでソフトウェア更新プログラムの展開を監視できます。
1.  サーバー グループのコレクションに[ソフトウェア更新プログラムを展開](manually-deploy-software-updates.md)します。   

2.  [ソフトウェア更新プログラムの展開を監視](monitor-software-updates.md)します。 ソフトウェア更新プログラムの展開の標準の監視ビューに加え、クライアントがソフトウェア更新プログラムをインストールする順番を待機しているときには、 **[ロックを待っています]** 状態が表示されます。 詳細は、UpdatesDeployment.log ファイルで確認できます。


## <a name="clear-the-deployment-locks-for-computers-in-a-server-group"></a>サーバー グループ内のコンピューターの展開のロックを解除する  
コンピューターが展開ロックを解放できないときは、ユーザーがコレクションのすべてのサーバー グループの展開ロックを手動で解放できます。 展開がコレクション内のコンピューターの更新でスタックしていて、まだ対応していないコンピューターがある場合にのみ、ロックを解除します。  
1.  **[資産とコンプライアンス]** ワークスペースで、 **[デバイス コレクション]** ノードをクリックしてから、コレクションをクリックして展開のロックを解除します。  

2.  **[ホーム]** タブの **[展開]** グループで、 **[サーバー グループ展開のロックを解除]** をクリックします。 クライアントがソフトウェア更新プログラムのインストールに失敗し他のクライアントのソフトウェア更新プログラムのインストールを妨げている場合は、展開のロックを手動でクリアできます。  
