---
title: 構成基準を作成する
titleSuffix: Configuration Manager
description: Configuration Manager でコレクションに展開できる構成基準を作成します。
ms.date: 11/29/2019
ms.prod: configuration-manager
ms.technology: configmgr-compliance
ms.topic: conceptual
ms.assetid: 678c9622-c61b-47d1-ba25-690616e431c7
author: mestew
manager: dougeby
ms.author: mstewart
ms.openlocfilehash: 01355230d0dc8969555740cc25a08e0b8d2967d0
ms.sourcegitcommit: 9ec77929df571a6399f4e06f07be852314a3c5a4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/10/2020
ms.locfileid: "86240475"
---
# <a name="create-configuration-baselines-in-configuration-manager"></a>Configuration Manager での構成基準の作成

*適用対象:Configuration Manager (Current Branch)*


Configuration Manager の構成基準には、定義済みの構成項目と、場合によっては他の構成基準が含まれています。 構成基準を作成すると、構成基準をコレクションに展開できるようになります。それによって、そのコレクションに含まれるデバイスで構成基準をダウンロードしたり、そのデバイスが構成基準に対して対応しているかを評価できます。  

> [!TIP]
> Configuration Manager クライアントが構成基準に含まれる構成項目を評価する順序を指定する方法はありません。 これは非決定的です。<!-- MEMDocs#175 -->

## <a name="configuration-baselines"></a>構成基準

 Configuration Manager の構成基準には、構成項目の特定のリビジョンを含めたり、構成項目の最新バージョンを常に使用するように構成することができます。 構成項目のリビジョンの詳細については、「[構成データの管理タスク](../../compliance/deploy-use/management-tasks-for-configuration-data.md)」を参照してください。  

 構成基準の作成に使用できる方法は、2 つあります。  

- 構成データをファイルからインポートします。 起動する、 **構成データのインポート ウィザード**, で、 **構成項目** または **構成基準** 内のノード、 **資産とコンプライアンス**  ワークスペースで、をクリックして **構成データのインポート**です。 詳細については、「[構成データのインポート](import-configuration-data.md)」を参照してください。

- **[構成基準の作成]** ダイアログ ボックスを使用して、新しい構成基準を作成します。  

## <a name="create-a-configuration-baseline"></a>構成基準の作成

**[構成基準の作成]** ダイアログ ボックスを使用して構成基準を作成するには、次の手順に従います。  

1. Configuration Manager コンソールで、 **[資産とコンプライアンス]**  >  **[コンプライアンス設定]**  >  **[構成基準]** の順にクリックします。  

2. **ホーム** ] タブで、 **作成** グループで、[ **構成基準の作成**です。  

3. **[構成基準の作成]** ダイアログ ボックスで、構成基準に、一意の名前と説明を入力します。 名前には最大 255 文字を、説明には最大 512 文字を使用できます。  

4. **[構成データ]** 一覧に、この構成基準に含まれる、すべての構成項目または構成基準が表示されます。 新しい構成項目または構成基準を一覧に追加するには、 **[追加]** をクリックします。 次の項目から選択できます。  

   - **構成項目**  

   - **ソフトウェア更新プログラム**  

   - **構成基準**  
     > [!IMPORTANT]
     > ソフトウェア更新プログラムが 1000 を超えないように各構成基準を制限する必要があります。
5. **[目的の変更]** 一覧を使用して、 **[構成データ]** 一覧で選択した構成項目の動作を指定します。 次の項目から選択できます。  

   -   **必須**:クライアント デバイスで構成項目が検出されない場合、構成基準の評価は "非対応" になります。 検出された場合、評価は "対応" になります  

   -   **[オプション]** :クライアント コンピューターで、構成項目が参照するアプリケーションが見つかる場合のみ、構成項目の評価が "対応" になります。 アプリケーションが見つからない場合、構成基準は "非対応" としてマークされません (アプリケーションの構成項目のみに適用されます)。  

   -   **[禁止]** :クライアント コンピューターで構成項目が検出された場合、構成基準の評価は "非対応" になります (アプリケーションの構成項目のみに適用されます)。  

   > [!NOTE]
   >  **目的の変更** 一覧は、オプションをクリックした場合にのみ使用できます。 **この構成項目には、アプリケーションの設定が含まれています。** 上、 **全般的な** のページ、 **構成項目の作成ウィザード**です。  

6. 使用して、 **変更リビジョン** 特定またはクライアント デバイスでの対応評価のためかを選択する構成項目の最新の改訂版を選択する一覧 **常に最新** を常に最新の改訂版を使用します。 構成項目のリビジョンの詳細については、「[構成データの管理タスク](../../compliance/deploy-use/management-tasks-for-configuration-data.md)」を参照してください。  

7. 構成基準から構成項目を削除するには、構成項目を選択して、 **[削除]** をクリックします。  

8. バージョン 1806 以降、必要に応じて **[共同管理のクライアントに対して常にこの基準を適用する]** を選択します。 オンにした場合、この基準は、Intune で管理されているクライアントにも適用されます。  この例外は、組織で必要とされる設定を構成するために使用できるかもしれませんが、Intune ではまだ利用できません。

9. 必要に応じて、 **[カテゴリ]** をクリックして検索とフィルターの基準にカテゴリを割り当てます。 

10. クリックして **ok** を閉じる、 **構成基準の作成**  ダイアログ ボックスと、構成基準を作成します。  

>[!NOTE]
> **[共同管理のクライアントに対して常にこの基準を適用する]** 設定など、既存の基準を変更すると、基準コンテンツのバージョンが 1 ずつ増加します。 クライアントは、新しいバージョンを評価して基準レポートを更新する必要があります。

## <a name="include-custom-configuration-baselines-as-part-of-compliance-policy-assessment"></a><a name="bkmk_CAbaselines"></a> コンプライアンス ポリシー評価の一部としてカスタム構成基準を含める
<!--3608345-->
*(バージョン 1910 で導入)*

バージョン 1910 より、コンプライアンス ポリシー評価の規則として、カスタム構成基準の評価を追加できるようになりました。 構成基準を作成または編集するとき、 **[コンプライアンス ポリシー評価の一部としてこの基準を評価する]** というオプションがあります。 コンプライアンス ポリシー ルールを追加または編集するとき、 **[コンプライアンス ポリシーの評価に構成済みのベースラインを含める]** という条件があります。 共同管理デバイスの場合、全体のコンプライアンス対応状態の一部として Configuration Manager コンプライアンス評価の結果を受け取るように Intune を設定すると、この情報は Azure AD に送信されます。 その後、Office 365 リソースに対する条件付きアクセスで利用できます。 詳細については、「[共同管理での条件付きアクセス](../../comanage/quickstart-conditional-access.md)」を参照してください。

コンプライアンス ポリシー評価の一部としてカスタム構成基準を含めるには、次の操作を行います。

- [ **[コンプライアンス ポリシーの評価に構成済みのベースラインを含める]** ](#bkmk_CA) という規則を使用して、コンプライアンス ポリシーを作成し、ユーザー コレクションに展開します。
- デバイス コレクションに展開された構成基準で [ **[コンプライアンス ポリシーの評価の一環としてこのベースラインを評価する]** ](#bkmk_eval-baseline) をオンにします。

> [!IMPORTANT]
> 共同管理されているデバイスを対象とする場合、[共同管理の前提条件](../../comanage/overview.md#prerequisites)を満たしていることを確認します。

### <a name="example-evaluation-scenario"></a>評価シナリオの例

**[コンプライアンス ポリシーの評価に構成済みのベースラインを含める]** というルール条件が含まれるコンプライアンス ポリシーでターゲットが設定されたコレクションにユーザーが属する場合、そのユーザーまたはユーザーのデバイスに展開され、 **[コンプライアンス ポリシーの評価の一環としてこのベースラインを評価する]** オプションが選択されているベースラインのコンプライアンスが評価されます。 次に例を示します。

- `User1` は `User Collection 1` の一部です。
- `User1` では、`Device Collection 1` と `Device Collection 2` に含まれている `Device1` が使用されます。
- `Compliance Policy 1` には **[コンプライアンス ポリシーの評価に構成済みのベースラインを含める]** というルール条件があり、`User Collection 1` に展開されています。
- `Configuration Baseline 1` では **[コンプライアンス ポリシーの評価の一環としてこのベースラインを評価する]** が選択されており、`Device Collection 1` に展開されています。
- `Configuration Baseline 2` では **[コンプライアンス ポリシーの評価の一環としてこのベースラインを評価する]** が選択されており、`Device Collection 2` に展開されています。

このシナリオでは、`Device1` を利用して `Compliance Policy 1` の `User1` を評価するとき、`Configuration Baseline 1` と `Configuration Baseline 2` も評価されます。

- `User1` では `Device2` が使用されることもあります。
- `Device2` は `Device Collection 2` と `Device Collection 3` のメンバーです。
- `Device Collection 3` には `Configuration Baseline 3` が展開されており、 **[コンプライアンス ポリシーの評価の一環としてこのベースラインを評価する]** が選択されいます。

`User1` で `Device2` が使用されるとき、`Compliance Policy 1` の評価時、`Configuration Baseline 2` のみが評価されます。

> [!NOTE]
><!--5582516-->
> クライアントで以前に評価されたことがない新しいベースラインがコンプライアンス ポリシーによって評価される場合、非準拠が報告されることがあります。 これは、コンプライアンスの評価時、ベースライン評価が実行中の場合に発生します。 この問題を回避するには、**ソフトウェア センター**で **[ポリシー準拠状況の確認]** をクリックします。

### <a name="create-and-deploy-a-compliance-policy-with-a-rule-for-baseline-compliance-policy-assessment"></a><a name="bkmk_CA"></a> 基準のコンプライアンス ポリシー評価の規則を使用して、コンプライアンス ポリシーを作成および展開する

1. **[資産とコンプライアンス]** ワークスペースで **[コンプライアンス設定]** を展開し、 **[コンプライアンス ポリシー]** ノードを選択します。
1. リボンの **[コンプライアンス ポリシーの作成]** をクリックし、 **[コンプライアンス ポリシーの作成]** ウィザードを表示します。 
1. **[全般]** ページで **[Configuration Manager クライアントで管理されるデバイスのコンプライアンス規則]** を選択します。
   - コンプライアンス ポリシー評価の一環としてカスタム構成ベースラインを含めるには、デバイスを Configuration Manager クライアントで管理する必要があります。
1. **[サポートされているプラットフォーム]** ページでプラットフォームを選択します。
1. **[ルール]** ページで **[新規]** を選択し、 **[コンプライアンス ポリシーの評価に構成済みのベースラインを含める]** 条件を選択します。

   ![[コンプライアンス ポリシーの評価に構成済みのベースラインを含める] 条件](./media/3608345-create-compliance-policy-rule.png)

1. **[OK]** をクリックし、 **[次へ]** をクリックして **[概要]** ページに進みます。
1. 選択内容を確認し、 **[次へ]** をクリックし、 **[閉じる]** をクリックします。
1. **[コンプライアンス ポリシー]** ノードで、作成したポリシーを右クリックし、 **[展開]** を選択します。
1. ポリシーに対してコレクション、アラート生成設定、コンプライアンス評価スケジュールを選択します。
1. **[OK]** をクリックし、コンプライアンス ポリシーを展開します。

### <a name="select-a-configuration-baseline-and-check-evaluate-this-baseline-as-part-of-compliance-policy-assessment"></a><a name="bkmk_eval-baseline"></a> 構成基準を選択し、[コンプライアンス ポリシー評価の一部としてこの基準を評価する] をオンにする

1. **[資産とコンプライアンス]** ワークスペースで、 **[コンプライアンス設定]** を展開し、 **[構成基準]** ノードを選択します。
1. デバイス コレクションに展開されている既存のベースラインを右クリックし、 **[プロパティ]** を選択します。 必要に応じて、新しい基準を作成できます。
   - ベースラインは、ユーザー コレクションではなく、デバイス コレクションに展開する必要があります。
1. **[コンプライアンス ポリシーの評価の一環としてこのベースラインを評価する]** 設定を有効にします。
   - **デバイス構成**機関として Intune を使用している共同管理デバイスの場合は、 **[共同管理のクライアントに対しても常にこの基準を適用する]** をオンにしていることを確認します。
1. **[OK]** をクリックし、構成基準の変更内容を保存します。

   ![構成基準のプロパティ ダイアログ ボックス](./media/3608345-configuration-baseline-properties.png)

### <a name="log-files-for-custom-configuration-baselines-as-part-of-compliance-policy-assessment"></a>コンプライアンス ポリシー評価の一部としてのカスタム構成基準のログ ファイル

- ComplianceHandler.log
- SettingsAgent.log
- DCMAgent.log
- CIAgent.log

## <a name="next-steps"></a>次のステップ

[構成データのインポート](import-configuration-data.md)
